<!DOCTYPE html>
<html lang="zh"><head><title>Blog | Darren</title><meta name="generator" content="Jekyll v4.3.3" /><meta property="og:title" content="Blog" /><meta name="author" content="Darren Tu" /><meta property="og:locale" content="zh_TW" /><meta name="description" content="The official Hydejack blog. Version updates, example content and how-to guides on how to blog with Jekyll." /><meta property="og:description" content="The official Hydejack blog. Version updates, example content and how-to guides on how to blog with Jekyll." /><link rel="canonical" href="https://darrentu8.github.io/" /><meta property="og:url" content="https://darrentu8.github.io/" /><meta property="og:site_name" content="Darren" /><meta property="og:type" content="website" /><link rel="next" href="https://darrentu8.github.io/2/" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Blog" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebSite","author":{"@type":"Person","name":"Darren Tu"},"dateModified":"2022-06-28T01:14:55+08:00","description":"The official Hydejack blog. Version updates, example content and how-to guides on how to blog with Jekyll.","headline":"Blog","name":"Darren","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://darrentu8.github.io/assets/img/logo.png"},"name":"Darren Tu"},"url":"https://darrentu8.github.io/"}</script><meta name="color-scheme" content="light"><meta name="theme-color" content="rgb(8,46,57)"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Darren"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="application-name" content="Darren"><meta name="generator" content="Hydejack v9.2.1" /><link rel="alternate" href="https://darrentu8.github.io/" hreflang="zh-tw"><link type="application/atom+xml" rel="alternate" href="https://darrentu8.github.io/feed.xml" title="Darren" /><link rel="shortcut icon" href="/assets/icons/favicon.ico"><link rel="apple-touch-icon" href="/assets/icons/icon-192x192.png"><link rel="manifest" href="/assets/site.webmanifest"><link rel="dns-prefetch" href="https://fonts.googleapis.com"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preload" href="/assets/img/swipe.svg" as="image" id="_hrefSwipeSVG"><link rel="dns-prefetch" href="/assets/js/search-worker-9.2.1.js" as="worker" id="_hrefSearch"> <script>((r,a)=>{function d(e,t,n,o){e.addEventListener?e.addEventListener(t,n,o):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}r.loadJS=function(e,t){var n=a.createElement("script"),e=(n.src=e,t&&d(n,"load",t,{once:!0}),a.scripts[0]);return e.parentNode.insertBefore(n,e),n},r._loaded=!1,r.loadJSDeferred=function(e,t){var n=a.createElement("script");function o(){r._loaded=!0,t&&d(n,"load",t,{once:!0});var e=a.scripts[0];e.parentNode.insertBefore(n,e)}return n.src=e,r._loaded?o():d(r,"load",o,{once:!0}),n},r.setRel=r.setRelStylesheet=function(e){d(a.getElementById(e),"load",function(){this.rel="stylesheet"},{once:!0})}})(window,document); !function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this); !function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this); !function(w) { w._baseURL = '/'; w._publicPath = '/assets/js/'; w._noPushState = false; w._noDrawer = false; w._noNavbar = false; w._noToc = false; w._noSearch = false; w._advertise = false; w._search = { DATA_URL: '/assets/sitedata.json?no-cache', STORAGE_KEY: 'mini-search/', INDEX_KEY: 'index--2024-09-16T23:30:31+08:00', }; w._clapButton = false; }(window);</script> <script async src="/assets/bower_components/MathJax/es5/tex-mml-chtml.js" id="_MathJax"></script> <!--[if gt IE 8]><!----><style id="_styleInline"> .clearfix,.sidebar-social::after{content:"";display:table;clear:both}.color-transition,.content .avatar,.nav-btn,.nav-btn-bar,.navbar,.message,.note-sm,#markdown-toc,.note,.hr-bottom,.hr-after::after,hr,.hr,p,body{transition:none}#_dark-mode{font-size:1.25rem}@media screen{body,body.light-mode{--body-color: #333;--body-bg: #fff;--border-color: #ebebeb;--gray: #777;--gray-bg: rgba(0, 0, 0, 0.025);--gray-text: #666;--menu-text: #bbb;--inv-body-color: #ccc;--inv-body-bg: var(--dark-mode-body-bg)}body .content,body.light-mode .content{-webkit-font-smoothing:initial;-moz-osx-font-smoothing:initial}body.dark-mode{--body-color: #ccc;--body-bg: var(--dark-mode-body-bg);--border-color: var(--dark-mode-border-color);--gray: rgba(255,255,255,.5);--gray-bg: rgba(255,255,255,.033);--gray-text: rgba(255,255,255,.625);--menu-text: rgba(255,255,255,.25);--inv-body-color: #333;--inv-body-bg: #fff}body.dark-mode .content{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}}html{--font-family: Noto Sans, Helvetica, Arial, sans-serif;--font-family-heading: Roboto Slab, Helvetica, Arial, sans-serif;--code-font-family: Fira Code, Menlo, Monaco, Consolas, monospace;--root-font-size: 15px;--root-font-size-medium: 16px;--root-font-size-large: 17px;--root-font-size-print: 8pt;--root-line-height: 1.75;--font-weight: 400;--font-weight-bold: 700;--font-weight-heading: 900;--content-width-5: 54rem;--content-margin-5: 4rem;--sidebar-width: 21rem;--half-content: 31rem;--break-point-3: 64em;--break-point-5: 86em;--break-point-dynamic: 104rem}*{box-sizing:border-box}html,body{margin:0;padding:0}html{font-family:var(--font-family);font-size:var(--root-font-size);line-height:var(--root-line-height)}body{color:var(--body-color);background-color:var(--body-bg);font-weight:var(--font-weight);overflow-y:scroll}.content img,.img,.content video,.video{max-width:100%;height:auto}.lead{margin-left:-1rem;margin-right:-1rem;margin-bottom:1.5rem}img.lead,video.lead{display:block;max-width:calc(100% + 2rem);width:calc(100% + 2rem);height:auto}.heading,.f6,h6,.h6,.f5,h5,.h5,.f4,.sidebar-nav-item,h4,.h4,.post-date,.f3,h3,.h3,.f2,h2,.h2,.f1,h1,.h1{font-family:var(--font-family-heading);font-weight:var(--font-weight-heading)}.f1,h1,.h1{font-size:2rem;line-height:1.3}.f2,h2,.h2{font-size:1.5rem;line-height:1.4}.f3,h3,.h3{font-size:1.2em;line-height:1.5}.f4,.sidebar-nav-item,h4,.h4,.post-date{font-size:1.08rem;line-height:1.6}.f5,h5,.h5{font-size:1.04rem;line-height:1.7}.f6,h6,.h6{font-size:1rem}.content h1>a,.content .h1>a{text-decoration:none;border-bottom:none}@media screen and (max-width: 42em){.content h1,.content .h1{font-size:1.7rem;line-height:1.35}}@media screen and (min-width: 86em){.content h1,.content .h1{font-size:2.4rem;line-height:1.25}}@media screen and (min-width: 104rem){body:not(.no-large-headings) .content h1,body:not(.no-large-headings) .content .h1{width:calc(100% + 50vw - 32rem);font-size:3rem;line-height:1.2}}@media screen and (min-width: 124em){body:not(.no-large-headings) .content h1,body:not(.no-large-headings) .content .h1{font-size:4rem;line-height:1.1}}h1,h2,h3,.h1,.h2,.h3{margin:4rem 0 1rem}h4,h5,h6,.h4,.post-date,.h5,.h6{margin:3rem 0 .5rem}p{margin-top:0;margin-bottom:1rem}p.lead{font-size:1.2em;margin-top:1.5rem;margin-bottom:1.5rem;padding:0 1rem}ul,ol,dl{margin-top:0;margin-bottom:1rem}ul,ol{padding-left:1.25rem}hr,.hr{border:0;margin:1rem 0;border-top:1px solid var(--border-color)}.hr-after::after{content:"";display:block;margin:1rem 0;border-top:1px solid var(--border-color)}.hr-bottom{border-bottom:1px solid var(--border-color);padding-bottom:.75rem;margin-bottom:1rem}.page{margin-bottom:3em}.page li+li{margin-top:.25rem}.page>header{position:relative;margin-bottom:2rem}@media screen and (min-width: 104rem){body:not(.no-third-column) .page>header>.lead+.note-sm,body:not(.no-third-column) .page>header>.lead+#markdown-toc,body:not(.no-third-column) .page>header>.lead+.note,body:not(.no-third-column) .page>header>a.no-hover+.note-sm,body:not(.no-third-column) .page>header>a.no-hover+#markdown-toc,body:not(.no-third-column) .page>header>a.no-hover+.note{position:absolute;right:-25rem;width:21rem;bottom:0;margin-bottom:0}}.page-title,.post-title{margin-top:0}.post-date{display:flex;justify-content:space-between;margin-top:-0.6rem;height:2rem;margin-bottom:.85rem;color:var(--gray)}.post-date>.ellipsis,#breadcrumbs.post-date>ul{cursor:pointer}.post-date [class^=icon-]{display:inline-block;font-size:smaller;margin-right:.25rem}.related-posts{padding-left:0;list-style:none;margin-bottom:2rem}.related-posts>li,.related-posts>li+li{margin-top:1rem}.message,.note-sm,#markdown-toc,.note{margin-bottom:1rem;padding:1rem;color:var(--gray-text);background-color:var(--gray-bg);margin-left:-1rem;margin-right:-1rem}.note-sm,#markdown-toc,.note{background:rgba(0,0,0,0);color:var(--body-color);font-size:smaller;border-left:1px solid var(--border-color);padding:1.2rem 1rem 0 1rem;margin:1rem -1rem;position:relative}.note-sm:before,#markdown-toc:before,.note:before{font-size:.667rem;font-weight:bold;font-style:normal;letter-spacing:.025rem;text-transform:uppercase;color:var(--menu-text);position:absolute;top:0}.note-sm[title]:before,[title]#markdown-toc:before,[title].note:before{content:attr(title) !important}.note{font-size:1rem}@media screen{body::before{content:"";width:.5rem;background:var(--gray-bg);position:fixed;left:0;top:0;bottom:0}}@media(min-width: 64em){body::before{width:21rem}}@media(min-width: 104rem){body::before{width:calc(50% - 31rem)}}@media screen and (min-width: 42em){html{font-size:var(--root-font-size-medium)}}@media screen and (min-width: 124em){html{font-size:var(--root-font-size-large)}}#breadcrumbs>ul{height:1rem;margin:-1.5rem 0 .5rem;padding:0;font-size:.667rem;color:var(--menu-text);text-transform:uppercase;width:100%;list-style:none}#breadcrumbs>ul>li{display:inline}#breadcrumbs>ul>li a{color:var(--gray);text-decoration:none;border-bottom:none}.fl{float:left}.fr{float:right}.mb4{margin-bottom:4rem}.mb6{margin-bottom:6rem}.mt0{margin-top:0}.mt1{margin-top:1rem}.mt2{margin-top:2rem}.mt3{margin-top:3rem}.mt4{margin-top:4rem}.pb0{padding-bottom:0}.ml1{margin-left:1rem}.mr1{margin-right:1rem}.sixteen-nine{position:relative}.sixteen-nine::before{display:block;content:"";width:100%;padding-top:56.25%}.sixteen-nine>*{position:absolute;top:0;left:0;right:0;bottom:0}.sixteen-ten{position:relative}.sixteen-ten::before{display:block;content:"";width:100%;padding-top:62.5%}.sixteen-ten>*{position:absolute;top:0;left:0;right:0;bottom:0}.four-three{position:relative}.four-three::before{display:block;content:"";width:100%;padding-top:75%}.four-three>*{position:absolute;top:0;left:0;right:0;bottom:0}.sr-only{display:none}.larger{font-size:larger}.smaller{font-size:smaller}.clearfix,.sidebar-social::after{content:"";display:table;clear:both}.ellipsis,#breadcrumbs>ul{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.border{border:1px solid var(--border-color)}@media(min-width: 42em){.border-radius,.lead,.page .aspect-ratio.sixteen-nine.lead{border-radius:.5rem}}.fallback-img{background-position:center;background-repeat:no-repeat;background-image:url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB3aWR0aD0iMTYwIiBoZWlnaHQ9IjkwIiB2aWV3Qm94PSIwIDAgMTYwIDkwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxnIHRyYW5zZm9ybT0ibWF0cml4KDAuMDQ4ODI4LCAwLCAwLCAwLjA0Nzk5MSwgNTQuOTk5OTczLCAyMC40MjgxNDgpIj4KICAgIDxwYXRoIHN0eWxlPSJmaWxsOnJnYmEoMTI4LDEyOCwxMjgsLjMzKSIgZD0iTTk1OS44ODQgMTI4YzAuMDQwIDAuMDM0IDAuMDgyIDAuMDc2IDAuMTE2IDAuMTE2djc2Ny43N2MtMC4wMzQgMC4wNDAtMC4wNzYgMC4wODItMC4xMTYgMC4xMTZoLTg5NS43N2MtMC4wNDAtMC4wMzQtMC4wODItMC4wNzYtMC4xMTQtMC4xMTZ2LTc2Ny43NzJjMC4wMzQtMC4wNDAgMC4wNzYtMC4wODIgMC4xMTQtMC4xMTRoODk1Ljc3ek05NjAgNjRoLTg5NmMtMzUuMiAwLTY0IDI4LjgtNjQgNjR2NzY4YzAgMzUuMiAyOC44IDY0IDY0IDY0aDg5NmMzNS4yIDAgNjQtMjguOCA2NC02NHYtNzY4YzAtMzUuMi0yOC44LTY0LTY0LTY0djB6Ii8+CiAgICA8cGF0aCBzdHlsZT0iZmlsbDpyZ2JhKDEyOCwxMjgsMTI4LC4zMykiIGQ9Ik04MzIgMjg4YzAgNTMuMDIwLTQyLjk4IDk2LTk2IDk2cy05Ni00Mi45OC05Ni05NiA0Mi45OC05NiA5Ni05NiA5NiA0Mi45OCA5NiA5NnoiLz4KICAgIDxwYXRoIHN0eWxlPSJmaWxsOnJnYmEoMTI4LDEyOCwxMjgsLjMzKSIgZD0iTTg5NiA4MzJoLTc2OHYtMTI4bDIyNC0zODQgMjU2IDMyMGg2NGwyMjQtMTkyeiIvPgogIDwvZz4KPC9zdmc+")}hy-push-state a{color:var(--body-color)}@supports not ((text-decoration-thickness: initial) and (text-underline-offset: initial)){hy-push-state a{text-decoration:none;border-bottom:2px solid}}@supports(text-decoration-thickness: initial) and (text-underline-offset: initial){hy-push-state a{text-decoration-style:solid;text-underline-offset:.35rem;text-decoration-thickness:2px}}hy-push-state a.no-hover{border-bottom:none;text-decoration-thickness:unset;text-underline-offset:unset}@supports(text-decoration-thickness: initial) and (text-underline-offset: initial){.content a:not(.btn):not(.no-hover){text-decoration-color:var(--accent-color-faded)}}.content a:not(.btn):not(.no-hover){border-color:var(--accent-color-faded)}.content .aspect-ratio{overflow:hidden}.content .aspect-ratio img{margin:0;width:100%;height:100%;background-color:var(--gray-bg)}hy-drawer{width:100%;position:relative;overflow:hidden;display:block;z-index:4}@media screen and (min-width: 64em){hy-drawer{position:fixed;width:21rem;top:0;left:0;bottom:0;margin-left:0}hy-drawer.cover{position:relative;width:100%}}@media screen and (min-width: 104rem){hy-drawer{width:calc(50% - 31rem)}}.sidebar{position:relative;display:flex;justify-content:center;align-items:center;color:rgba(255,255,255,.75);text-align:center;min-height:100vh}.sidebar.invert{color:rgba(32,32,32,.75)}.sidebar a{color:#fff;border-bottom-color:rgba(255,255,255,.2);text-decoration-color:rgba(255,255,255,.2)}.sidebar.invert a{color:#222;border-bottom-color:rgba(32,32,32,.2);text-decoration-color:rgba(32,32,32,.2)}.sidebar-bg{position:absolute;top:0;left:calc(50% - 50vw);width:100vw;height:100%;background:#202020 center/cover}.sidebar-bg::after{content:"";position:absolute;top:0;left:0;bottom:0;right:0;background:rgba(0,0,0,.05)}.sidebar-bg.sidebar-overlay::after{background:linear-gradient(to bottom, rgba(32, 32, 32, 0) 0%, rgba(32, 32, 32, 0.5) 50%, rgba(32, 32, 32, 0) 100%)}.sidebar-sticky{position:relative;z-index:3;max-width:21rem;padding:1.5rem;contain:content}.sidebar-about .avatar{margin-bottom:1.5rem}.sidebar-about>a.sidebar-title{text-decoration:none}.sidebar-about>a.sidebar-title>h2{margin:0;padding-bottom:.5rem}.sidebar-about>a.sidebar-title::after{content:"";display:block;border-bottom:2px solid;margin:0 auto .5rem;width:4rem;border-color:rgba(255,255,255,.2);transition:border-color 250ms}.sidebar-about>a.sidebar-title:hover::after{border-color:#fff;transition:border-color 50ms}.sidebar.invert .sidebar-about>a.sidebar-title::after{border-color:rgba(32,32,32,.2)}.sidebar.invert .sidebar-about>a.sidebar-title:hover::after{border-color:#222}.sidebar-nav>ul{list-style:none;padding-left:0}.sidebar-nav-item{display:inline-block;margin-bottom:.5rem}@media(min-width: 64em){#_main.no-drawer #_menu{display:none}#_main.no-drawer .nav-btn-bar>:nth-child(2){border:none}}.sidebar-social>ul{display:inline-block;list-style:none;padding-left:0;margin-bottom:0}.sidebar-social>ul>li{float:left}.sidebar-social>ul>li>a{display:inline-block;text-align:center;font-size:1.4rem;width:3rem;height:4rem;padding:.5rem 0;line-height:3rem;text-decoration:none;border-bottom-width:2px;border-bottom-style:solid}.sidebar-social>ul li+li{margin-top:0}.fixed-common,.fixed-bottom,.fixed-top{position:fixed;left:0;width:100%;z-index:2}.fixed-top{top:0}.fixed-bottom{bottom:0}.navbar>.content{position:relative;padding-top:0;padding-bottom:0;min-height:0;max-height:5rem}.nav-btn-bar{margin:0 -1rem;background-color:#fff;background-color:var(--body-bg);height:5rem;display:flex;align-items:center;position:relative}.nav-btn-bar>:first-child,.nav-btn-bar>:last-child{border:none}.nav-btn{background:none;border:none;text-decoration:none;display:flex;align-items:center;justify-content:center;width:3.25rem;height:5rem;color:var(--menu-text);border-right:1px solid var(--border-color);border-left:1px solid var(--border-color);margin-left:-1px}#markdown-toc{margin:2rem -1rem 2rem calc(-1rem + 1px);padding-left:2.5rem;padding-bottom:.5rem}#markdown-toc:before{left:1rem}@media screen and (min-width: 104rem){body:not(.no-toc) #markdown-toc{position:absolute;z-index:4;width:20.5rem;right:0;margin:auto;overflow:auto}}@media screen and (min-width: 104rem){body.no-break-layout:not(.no-toc) #markdown-toc{width:calc(50% - 31rem)}}.content{margin-left:auto;margin-right:auto;padding:8rem 1rem 12rem}@media screen{.content{padding-left:1.5rem;min-height:100vh}}@media screen and (min-width: 42em){.content{max-width:42rem}}@media screen and (min-width: 54em){.content{max-width:48rem}}@media screen and (min-width: 64em){.content{padding-left:1rem;margin-left:24rem;margin-right:3rem}}@media screen and (min-width: 86em){.content{padding-top:9rem;margin-left:25rem;margin-right:4rem;max-width:54rem}}@media screen and (min-width: 104rem){.content{margin:auto}}.large-only{display:none}@media screen and (min-width: 104rem){.large-only{display:block}}.avatar{width:7rem;height:7rem;border-radius:100%;overflow:hidden;display:inline-block}.avatar img{width:100%}.content .avatar{float:right;box-sizing:content-box;border:1rem solid var(--body-bg);transition:border-color 1s ease;margin-top:-1.5rem;margin-right:-1rem}.note:before{content:"Note"}.page>header>.note-sm:before,.page>header>.note:before,.page>header>#markdown-toc:before{content:"Description"}#markdown-toc:before{content:"Table of Contents"}.layout-resume .note-sm:before,.layout-resume .note:before,.layout-resume #markdown-toc:before{content:"Summary"}</style><link rel="preload" as="style" href="/assets/css/hydejack-9.2.1.css" id="_stylePreload"><link rel="preload" as="style" href="/assets/icomoon/style.css" id="_iconsPreload"><link rel="preload" as="style" href="https://fonts.googleapis.com/css?family=Roboto+Slab:700%7CNoto+Sans:400,400i,700,700i&display=swap" id="_fontsPreload"> <script> setRel('_stylePreload'); setRel('_iconsPreload'); /**/setRel('_fontsPreload');/**/ </script> <noscript><link rel="stylesheet" href="/assets/css/hydejack-9.2.1.css"><link rel="stylesheet" href="/assets/icomoon/style.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab:700%7CNoto+Sans:400,400i,700,700i&display=swap"> </noscript><style id="_pageStyle"> html{--accent-color: rgb(79,177,186);--accent-color-faded: rgba(79, 177, 186, 0.5);--accent-color-highlight: rgba(79, 177, 186, 0.1);--accent-color-darkened: #409ba3;--theme-color: rgb(8,46,57);--dark-mode-body-bg: hsl(193.4693877551, 9.4230769231%, 17.5%);--dark-mode-border-color: hsl(193.4693877551, 9.4230769231%, 22.5%)}</style><!--<![endif]--><body class="no-break-layout"> <hy-push-state id="_pushState" replace-selector="#_main" link-selector="a[href]:not([href^='/assets/']):not(.external):not(.no-push-state)" script-selector="script" duration="500" hashchange > <hy-drawer id="_drawer" class="cover" side="left" threshold="10" noscroll opened ><header id="_sidebar" class="sidebar" role="banner"><div class="sidebar-bg sidebar-overlay" style="background-color:rgb(8,46,57);background-image:url(/assets/img/sidebar-bg.gif)"></div><div class="sidebar-sticky"><div class="sidebar-about"> <a class="no-hover" href="/" tabindex="-1"> <img src="/assets/img/logo.png" class="avatar" alt="Darren" width="120" height="120" loading="lazy" /> </a> <a class="sidebar-title" href="/"><h2 class="h1">Darren</h2></a><p class=""> A blog, portfolio, and resume.</div><nav class="sidebar-nav heading" role="navigation"> <span class="sr-only">Navigation:</span><ul><li> <a id="_drawer--opened" href="/blog/" class="sidebar-nav-item " > Blog </a><li> <a href="/projects/" class="sidebar-nav-item " > Showcase </a><li> <a href="/about/" class="sidebar-nav-item " > About Me </a><li> <a href="/resume/" class="sidebar-nav-item " > Resume </a></ul></nav><div class="sidebar-social"> <span class="sr-only">Social:</span><ul><li> <a href="https://gitlab.com/darrentu88" title="GitHub" class="no-mark-external"> <span class="icon-github"></span> <span class="sr-only">GitHub</span> </a><li> <a href="mailto:darrentu8@gmail.com" title="Email" class="no-mark-external"> <span class="icon-mail"></span> <span class="sr-only">Email</span> </a><li> <a href="https://www.instagram.com/tu_d/" title="Instagram" class="no-mark-external"> <span class="icon-instagram"></span> <span class="sr-only">Instagram</span> </a></ul></div></div></header></hy-drawer><hr class="sr-only" hidden /><div id="_navbar" class="navbar fixed-top"><div class="content"> <span class="sr-only">Jump to:</span><div class="nav-btn-bar"> <a id="_menu" class="nav-btn no-hover" href="#_drawer--opened"> <span class="sr-only">Navigation</span> <span class="icon-menu"></span> </a><div class="nav-span"></div></div></div></div><hr class="sr-only" hidden /><main id="_main" class="content layout-blog" role="main" ><nav id="breadcrumbs" class="screen-only"><ul></ul></nav><article id="post-blog-blog-react19-2" class="page post mb6" role="article"><header><h1 class="post-title flip-project-title"> <a href="/blog/2024-04-27-blog-react19-2/" class="flip-title"> React 19 進階技巧與最佳實踐 </a></h1><div class="post-date"> <span class="ellipsis mr1"> <time datetime="2024-04-27T00:00:00+08:00">27 Apr 2024</time> in <span>Blog</span> </span> <span class="ellipsis" data-tippy-content="Last modified at: 14 Sep 2024"> <span class="sr-only">Last modified at:</span> <span class="icon-history"></span> <time datetime="2024-09-14T22:31:29+08:00">2024-09-14</time> </span></div><a href="/blog/2024-04-27-blog-react19-2/" class="no-hover no-print-link flip-project" tabindex="-1"><div class="img-wrapper lead aspect-ratio sixteen-nine flip-project-img"> <img src="https://miro.medium.com/max/1400/1*HSisLuifMO6KbLfPOKtLow.jpeg" alt="React 19 進階技巧與最佳實踐" width="864" height="486" loading="lazy" /></div></a></header><ol id="markdown-toc"><li><a href="#前言" id="markdown-toc-前言">前言</a><li><a href="#進階技巧" id="markdown-toc-進階技巧">進階技巧</a><ol><li><a href="#1-使用-server-components-優化性能" id="markdown-toc-1-使用-server-components-優化性能">1. 使用 Server Components 優化性能</a><li><a href="#2-利用-concurrent-rendering-提升用戶體驗" id="markdown-toc-2-利用-concurrent-rendering-提升用戶體驗">2. 利用 Concurrent Rendering 提升用戶體驗</a><li><a href="#3-自動批處理狀態更新" id="markdown-toc-3-自動批處理狀態更新">3. 自動批處理狀態更新</a><li><a href="#4-改進的-ssr-和-hydration" id="markdown-toc-4-改進的-ssr-和-hydration">4. 改進的 SSR 和 Hydration</a><li><a href="#5-使用新-hooks-提升開發效率" id="markdown-toc-5-使用新-hooks-提升開發效率">5. 使用新 Hooks 提升開發效率</a></ol><li><a href="#總結" id="markdown-toc-總結">總結</a><li><a href="#參考資料" id="markdown-toc-參考資料">參考資料</a></ol><h2 id="前言">前言</h2><p>在本文中，我們將探討 React 19 的一些進階技巧和最佳實踐，幫助開發者更好地利用這些新特性來構建高效、可維護的應用。<h2 id="進階技巧">進階技巧</h2><h3 id="1-使用-server-components-優化性能">1. 使用 Server Components 優化性能</h3><p>Server Components 可以顯著減少客戶端的負擔，提升應用的性能。以下是如何在實際應用中使用 Server Components 的示例：<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ServerComponent.server.js</span>
<span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nf">ServerComponent</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nx">這是服務器端渲染的組件</span><span class="o">&lt;</span><span class="sr">/div&gt;</span><span class="err">;
</span><span class="p">}</span>
</code></pre></div></div><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// App.js</span>
<span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">ServerComponent</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./ServerComponent.server</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">function</span> <span class="nf">App</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return </span><span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">React</span> <span class="mi">19</span> <span class="nx">進階技巧</span><span class="o">&lt;</span><span class="sr">/h1</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">ServerComponent</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">App</span><span class="p">;</span>
</code></pre></div></div><h3 id="2-利用-concurrent-rendering-提升用戶體驗">2. 利用 Concurrent Rendering 提升用戶體驗</h3><p>Concurrent Rendering 允許 React 更高效地處理多任務，提升應用的響應速度。以下是如何使用 <code class="language-plaintext highlighter-rouge">useTransition</code> 來實現平滑的用戶體驗：<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">useState</span><span class="p">,</span> <span class="nx">useTransition</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">function</span> <span class="nf">App</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">isPending</span><span class="p">,</span> <span class="nx">startTransition</span><span class="p">]</span> <span class="o">=</span> <span class="nf">useTransition</span><span class="p">();</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">count</span><span class="p">,</span> <span class="nx">setCount</span><span class="p">]</span> <span class="o">=</span> <span class="nf">useState</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

  <span class="kd">const</span> <span class="nx">handleClick</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nf">startTransition</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nf">setCount</span><span class="p">(</span><span class="nx">c</span> <span class="o">=&gt;</span> <span class="nx">c</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">};</span>

  <span class="k">return </span><span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">計數</span><span class="p">:</span> <span class="p">{</span><span class="nx">count</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/h1</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">handleClick</span><span class="p">}</span> <span class="nx">disabled</span><span class="o">=</span><span class="p">{</span><span class="nx">isPending</span><span class="p">}</span><span class="o">&gt;</span>
        <span class="p">{</span><span class="nx">isPending</span> <span class="p">?</span> <span class="dl">'</span><span class="s1">更新中...</span><span class="dl">'</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">增加</span><span class="dl">'</span><span class="p">}</span>
      <span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">App</span><span class="p">;</span>
</code></pre></div></div><h3 id="3-自動批處理狀態更新">3. 自動批處理狀態更新</h3><p>React 19 的自動批處理功能可以減少重新渲染次數，提高性能。以下是如何利用這一功能的示例：<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">useState</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">function</span> <span class="nf">App</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">count</span><span class="p">,</span> <span class="nx">setCount</span><span class="p">]</span> <span class="o">=</span> <span class="nf">useState</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">text</span><span class="p">,</span> <span class="nx">setText</span><span class="p">]</span> <span class="o">=</span> <span class="nf">useState</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span>

  <span class="kd">const</span> <span class="nx">handleClick</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nf">setCount</span><span class="p">(</span><span class="nx">c</span> <span class="o">=&gt;</span> <span class="nx">c</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
    <span class="nf">setText</span><span class="p">(</span><span class="dl">'</span><span class="s1">計數已更新</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="k">return </span><span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">計數</span><span class="p">:</span> <span class="p">{</span><span class="nx">count</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/h1</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">text</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/p</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">handleClick</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">增加</span><span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">App</span><span class="p">;</span>
</code></pre></div></div><h3 id="4-改進的-ssr-和-hydration">4. 改進的 SSR 和 Hydration</h3><p>React 19 改進了 SSR 和 Hydration 過程，使得應用加載更快。以下是如何使用 <code class="language-plaintext highlighter-rouge">ReactDOMServer</code> 進行服務器端渲染的示例：<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">ReactDOMServer</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-dom/server</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">App</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./App</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">html</span> <span class="o">=</span> <span class="nx">ReactDOMServer</span><span class="p">.</span><span class="nf">renderToString</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">App</span> <span class="o">/&gt;</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">html</span><span class="p">);</span>
</code></pre></div></div><h3 id="5-使用新-hooks-提升開發效率">5. 使用新 Hooks 提升開發效率</h3><p>React 19 引入了新的 Hooks，如 <code class="language-plaintext highlighter-rouge">useDeferredValue</code> 和 <code class="language-plaintext highlighter-rouge">useId</code>，提供更多的功能和靈活性。以下是如何使用 <code class="language-plaintext highlighter-rouge">useDeferredValue</code> 的示例：<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">useState</span><span class="p">,</span> <span class="nx">useDeferredValue</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">function</span> <span class="nf">App</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">value</span><span class="p">,</span> <span class="nx">setValue</span><span class="p">]</span> <span class="o">=</span> <span class="nf">useState</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">deferredValue</span> <span class="o">=</span> <span class="nf">useDeferredValue</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>

  <span class="k">return </span><span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">value</span><span class="p">}</span> <span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="nx">e</span> <span class="o">=&gt;</span> <span class="nf">setValue</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">)}</span> <span class="sr">/</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">延遲值</span><span class="p">:</span> <span class="p">{</span><span class="nx">deferredValue</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/p</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">App</span><span class="p">;</span>
</code></pre></div></div><h2 id="總結">總結</h2><p>通過掌握這些進階技巧和最佳實踐，開發者可以充分利用 React 19 的新特性，構建高效、靈活的應用：<ol><li>使用 Server Components 優化性能。<li>利用 Concurrent Rendering 提升用戶體驗。<li>自動批處理狀態更新以提高性能。<li>改進的 SSR 和 Hydration 使應用加載更快。<li>使用新 Hooks 提升開發效率。</ol><h2 id="參考資料">參考資料</h2><ul><li><a href="https://reactjs.org/">React 官方文檔</a><li><a href="https://reactjs.org/blog/2024/04/16/react-v19.html">React 19 發布公告</a></ul><footer><p class="read-more"> Continue reading <a class="heading flip-title" href="/blog/2024-04-27-blog-react19-2/">React 19 進階技巧與最佳實踐</a></footer></article><article id="post-blog-blog-react19-1" class="page post mb6" role="article"><header><h1 class="post-title flip-project-title"> <a href="/blog/2024-04-16-blog-react19-1/" class="flip-title"> React 19 的新特性與應用技巧 </a></h1><div class="post-date"> <span class="ellipsis mr1"> <time datetime="2024-04-16T00:00:00+08:00">16 Apr 2024</time> in <span>Blog</span> </span> <span class="ellipsis" data-tippy-content="Last modified at: 14 Sep 2024"> <span class="sr-only">Last modified at:</span> <span class="icon-history"></span> <time datetime="2024-09-14T22:31:29+08:00">2024-09-14</time> </span></div><a href="/blog/2024-04-16-blog-react19-1/" class="no-hover no-print-link flip-project" tabindex="-1"><div class="img-wrapper lead aspect-ratio sixteen-nine flip-project-img"> <img src="https://miro.medium.com/max/1400/1*HSisLuifMO6KbLfPOKtLow.jpeg" alt="React 19 的新特性與應用技巧" width="864" height="486" loading="lazy" /></div></a></header><ol id="markdown-toc"><li><a href="#前言" id="markdown-toc-前言">前言</a><li><a href="#react-19-的新特性" id="markdown-toc-react-19-的新特性">React 19 的新特性</a><ol><li><a href="#1-server-components" id="markdown-toc-1-server-components">1. Server Components</a><li><a href="#2-concurrent-rendering" id="markdown-toc-2-concurrent-rendering">2. Concurrent Rendering</a><li><a href="#3-automatic-batching" id="markdown-toc-3-automatic-batching">3. Automatic Batching</a><li><a href="#4-improved-ssr-and-hydration" id="markdown-toc-4-improved-ssr-and-hydration">4. Improved SSR and Hydration</a><li><a href="#5-new-hooks" id="markdown-toc-5-new-hooks">5. New Hooks</a></ol><li><a href="#總結" id="markdown-toc-總結">總結</a><li><a href="#參考資料" id="markdown-toc-參考資料">參考資料</a></ol><h2 id="前言">前言</h2><p>React 19 帶來了許多令人興奮的新特性和改進。本文將介紹這些新特性，並展示如何在實際應用中利用它們來提升開發效率和應用性能。<h2 id="react-19-的新特性">React 19 的新特性</h2><h3 id="1-server-components">1. Server Components</h3><p>React 19 引入了 Server Components，允許在服務器端渲染部分組件，減少客戶端的負擔。<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ServerComponent.server.js</span>
<span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nf">ServerComponent</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nx">這是服務器端渲染的組件</span><span class="o">&lt;</span><span class="sr">/div&gt;</span><span class="err">;
</span><span class="p">}</span>
</code></pre></div></div><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// App.js</span>
<span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">ServerComponent</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./ServerComponent.server</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">function</span> <span class="nf">App</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return </span><span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">React</span> <span class="mi">19</span> <span class="nx">新特性</span><span class="o">&lt;</span><span class="sr">/h1</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">ServerComponent</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">App</span><span class="p">;</span>
</code></pre></div></div><h3 id="2-concurrent-rendering">2. Concurrent Rendering</h3><p>Concurrent Rendering 使得 React 可以更高效地處理多任務，提升應用的響應速度。<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">useState</span><span class="p">,</span> <span class="nx">useTransition</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">function</span> <span class="nf">App</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">isPending</span><span class="p">,</span> <span class="nx">startTransition</span><span class="p">]</span> <span class="o">=</span> <span class="nf">useTransition</span><span class="p">();</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">count</span><span class="p">,</span> <span class="nx">setCount</span><span class="p">]</span> <span class="o">=</span> <span class="nf">useState</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

  <span class="kd">const</span> <span class="nx">handleClick</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nf">startTransition</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nf">setCount</span><span class="p">(</span><span class="nx">c</span> <span class="o">=&gt;</span> <span class="nx">c</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">};</span>

  <span class="k">return </span><span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">計數</span><span class="p">:</span> <span class="p">{</span><span class="nx">count</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/h1</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">handleClick</span><span class="p">}</span> <span class="nx">disabled</span><span class="o">=</span><span class="p">{</span><span class="nx">isPending</span><span class="p">}</span><span class="o">&gt;</span>
        <span class="p">{</span><span class="nx">isPending</span> <span class="p">?</span> <span class="dl">'</span><span class="s1">更新中...</span><span class="dl">'</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">增加</span><span class="dl">'</span><span class="p">}</span>
      <span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">App</span><span class="p">;</span>
</code></pre></div></div><h3 id="3-automatic-batching">3. Automatic Batching</h3><p>React 19 自動批處理多個狀態更新，減少重新渲染次數，提高性能。<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">useState</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">function</span> <span class="nf">App</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">count</span><span class="p">,</span> <span class="nx">setCount</span><span class="p">]</span> <span class="o">=</span> <span class="nf">useState</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">text</span><span class="p">,</span> <span class="nx">setText</span><span class="p">]</span> <span class="o">=</span> <span class="nf">useState</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span>

  <span class="kd">const</span> <span class="nx">handleClick</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nf">setCount</span><span class="p">(</span><span class="nx">c</span> <span class="o">=&gt;</span> <span class="nx">c</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
    <span class="nf">setText</span><span class="p">(</span><span class="dl">'</span><span class="s1">計數已更新</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="k">return </span><span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">計數</span><span class="p">:</span> <span class="p">{</span><span class="nx">count</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/h1</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">text</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/p</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">handleClick</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">增加</span><span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">App</span><span class="p">;</span>
</code></pre></div></div><h3 id="4-improved-ssr-and-hydration">4. Improved SSR and Hydration</h3><p>React 19 改進了服務器端渲染（SSR）和水合（Hydration）過程，使得應用加載更快。<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">ReactDOMServer</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-dom/server</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">App</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./App</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">html</span> <span class="o">=</span> <span class="nx">ReactDOMServer</span><span class="p">.</span><span class="nf">renderToString</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">App</span> <span class="o">/&gt;</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">html</span><span class="p">);</span>
</code></pre></div></div><h3 id="5-new-hooks">5. New Hooks</h3><p>React 19 引入了新的 Hooks，如 <code class="language-plaintext highlighter-rouge">useDeferredValue</code> 和 <code class="language-plaintext highlighter-rouge">useId</code>，提供更多的功能和靈活性。<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">useState</span><span class="p">,</span> <span class="nx">useDeferredValue</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">function</span> <span class="nf">App</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">value</span><span class="p">,</span> <span class="nx">setValue</span><span class="p">]</span> <span class="o">=</span> <span class="nf">useState</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">deferredValue</span> <span class="o">=</span> <span class="nf">useDeferredValue</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>

  <span class="k">return </span><span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">value</span><span class="p">}</span> <span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="nx">e</span> <span class="o">=&gt;</span> <span class="nf">setValue</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">)}</span> <span class="sr">/</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">延遲值</span><span class="p">:</span> <span class="p">{</span><span class="nx">deferredValue</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/p</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">App</span><span class="p">;</span>
</code></pre></div></div><h2 id="總結">總結</h2><p>React 19 帶來了許多強大的新特性和改進：<ol><li>Server Components 允許在服務器端渲染部分組件。<li>Concurrent Rendering 提升了應用的響應速度。<li>Automatic Batching 減少了重新渲染次數。<li>改進的 SSR 和 Hydration 使應用加載更快。<li>新的 Hooks 提供了更多的功能和靈活性。</ol><p>通過掌握這些新特性，開發者可以充分利用 React 19 的優勢，構建高效、靈活的應用。<h2 id="參考資料">參考資料</h2><ul><li><a href="https://reactjs.org/">React 官方文檔</a><li><a href="https://reactjs.org/blog/2024/04/16/react-v19.html">React 19 發布公告</a></ul><footer><p class="read-more"> Continue reading <a class="heading flip-title" href="/blog/2024-04-16-blog-react19-1/">React 19 的新特性與應用技巧</a></footer></article><article id="post-blog-blog-vue3&whiteboard" class="page post mb6" role="article"><header><h1 class="post-title flip-project-title"> <a href="/blog/2024-02-21-blog-vue3&whiteboard/" class="flip-title"> 如何使用 Quasar + Vue 3 + Pinia + Fabric.js + WebSocket 打造高效互動式白板 </a></h1><div class="post-date"> <span class="ellipsis mr1"> <time datetime="2024-02-21T00:00:00+08:00">21 Feb 2024</time> in <span>Blog</span> </span> <span class="ellipsis" data-tippy-content="Last modified at: 16 Sep 2024"> <span class="sr-only">Last modified at:</span> <span class="icon-history"></span> <time datetime="2024-09-16T23:30:16+08:00">2024-09-16</time> </span></div><a href="/blog/2024-02-21-blog-vue3&whiteboard/" class="no-hover no-print-link flip-project" tabindex="-1"><div class="img-wrapper lead aspect-ratio sixteen-nine flip-project-img"> <img src="https://lh3.googleusercontent.com/D00ezluq1b-SDMIWyJ33_hNvyXFO8vo8XBq00nLQnhHSC2U2m0BO_Th1YjlyHYZVX-h_f4oCKPOdDsjXdV8aXwMi8cIrWW0sp5pjafo=w1440-v1-e30" alt="如何使用 Quasar + Vue 3 + Pinia + Fabric.js + WebSocket 打造高效互動式白板" width="864" height="486" loading="lazy" /></div></a></header><ol id="markdown-toc"><li><a href="#前言" id="markdown-toc-前言">前言</a><li><a href="#進階技巧" id="markdown-toc-進階技巧">進階技巧</a><ol><li><a href="#1-安裝必要的依賴" id="markdown-toc-1-安裝必要的依賴">1. 安裝必要的依賴</a><li><a href="#2-配置-quasar-應用" id="markdown-toc-2-配置-quasar-應用">2. 配置 Quasar 應用</a><li><a href="#3-創建-pinia-狀態管理" id="markdown-toc-3-創建-pinia-狀態管理">3. 創建 Pinia 狀態管理</a><li><a href="#4-創建白板組件" id="markdown-toc-4-創建白板組件">4. 創建白板組件</a><li><a href="#5-在主應用中使用白板組件" id="markdown-toc-5-在主應用中使用白板組件">5. 在主應用中使用白板組件</a></ol><li><a href="#總結" id="markdown-toc-總結">總結</a><li><a href="#參考資料" id="markdown-toc-參考資料">參考資料</a></ol><h2 id="前言">前言</h2><p>在本文中，我們將深入探討如何使用 Quasar 框架、Vue 3、Pinia、Fabric.js 和 WebSocket 技術來構建一個高效的電子白板應用。該應用將支持多用戶實時協作，並提供繪圖、註解、拖拉、放大、複製等多種功能，旨在提升用戶的互動體驗。<h2 id="進階技巧">進階技巧</h2><h3 id="1-安裝必要的依賴">1. 安裝必要的依賴</h3><p>首先，我們需要安裝 Quasar、Vue 3、Pinia、Fabric.js 和 Socket.IO 的相關依賴：<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install </span>quasar vue@next pinia fabric socket.io-client
</code></pre></div></div><h3 id="2-配置-quasar-應用">2. 配置 Quasar 應用</h3><p>接下來，我們需要初始化 Quasar 應用並配置路由和狀態管理：<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// src/boot/quasar.js</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">boot</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">quasar/wrappers</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">createPinia</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">pinia</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="nf">boot</span><span class="p">(({</span> <span class="nx">app</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">pinia</span> <span class="o">=</span> <span class="nf">createPinia</span><span class="p">();</span>
  <span class="nx">app</span><span class="p">.</span><span class="nf">use</span><span class="p">(</span><span class="nx">pinia</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div><h3 id="3-創建-pinia-狀態管理">3. 創建 Pinia 狀態管理</h3><p>我們將創建一個 Pinia store 來管理白板的狀態，確保應用的數據流暢通無阻：<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// src/stores/whiteboard.js</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">defineStore</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">pinia</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">useWhiteboardStore</span> <span class="o">=</span> <span class="nf">defineStore</span><span class="p">(</span><span class="dl">'</span><span class="s1">whiteboard</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">state</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">({</span>
    <span class="na">drawings</span><span class="p">:</span> <span class="p">[],</span>
  <span class="p">}),</span>
  <span class="na">actions</span><span class="p">:</span> <span class="p">{</span>
    <span class="nf">addDrawing</span><span class="p">(</span><span class="nx">drawing</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">drawings</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span><span class="nx">drawing</span><span class="p">);</span>
    <span class="p">},</span>
  <span class="p">},</span>
<span class="p">});</span>
</code></pre></div></div><h3 id="4-創建白板組件">4. 創建白板組件</h3><p>我們將創建一個白板組件，使用 Fabric.js 來處理繪圖、拖拉、放大、複製等功能，並確保用戶界面友好：<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!--</span> <span class="nx">src</span><span class="o">/</span><span class="nx">components</span><span class="o">/</span><span class="nx">Whiteboard</span><span class="p">.</span><span class="nx">vue</span> <span class="o">--&gt;</span>
<span class="o">&lt;</span><span class="nx">template</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">canvas</span> <span class="nx">id</span><span class="o">=</span><span class="dl">"</span><span class="s2">canvas</span><span class="dl">"</span> <span class="nx">ref</span><span class="o">=</span><span class="dl">"</span><span class="s2">canvas</span><span class="dl">"</span> <span class="p">@</span><span class="nd">mousedown</span><span class="o">=</span><span class="dl">"</span><span class="s2">startDrawing</span><span class="dl">"</span> <span class="p">@</span><span class="nd">mouseup</span><span class="o">=</span><span class="dl">"</span><span class="s2">stopDrawing</span><span class="dl">"</span> <span class="p">@</span><span class="nd">mousemove</span><span class="o">=</span><span class="dl">"</span><span class="s2">draw</span><span class="dl">"</span><span class="o">&gt;&lt;</span><span class="sr">/canvas</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="dl">"</span><span class="s2">color</span><span class="dl">"</span> <span class="nx">v</span><span class="o">-</span><span class="nx">model</span><span class="o">=</span><span class="dl">"</span><span class="s2">currentColor</span><span class="dl">"</span> <span class="o">/&gt;</span>
      <span class="o">&lt;</span><span class="nx">button</span> <span class="p">@</span><span class="nd">click</span><span class="o">=</span><span class="dl">"</span><span class="s2">addRectangle</span><span class="dl">"</span><span class="o">&gt;</span><span class="nx">矩形</span><span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">button</span> <span class="p">@</span><span class="nd">click</span><span class="o">=</span><span class="dl">"</span><span class="s2">addCircle</span><span class="dl">"</span><span class="o">&gt;</span><span class="nx">圓形</span><span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">button</span> <span class="p">@</span><span class="nd">click</span><span class="o">=</span><span class="dl">"</span><span class="s2">undo</span><span class="dl">"</span><span class="o">&gt;</span><span class="nx">復原</span><span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">button</span> <span class="p">@</span><span class="nd">click</span><span class="o">=</span><span class="dl">"</span><span class="s2">redo</span><span class="dl">"</span><span class="o">&gt;</span><span class="nx">重做</span><span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="dl">"</span><span class="s2">file</span><span class="dl">"</span> <span class="p">@</span><span class="nd">change</span><span class="o">=</span><span class="dl">"</span><span class="s2">addImage</span><span class="dl">"</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>  <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="sr">/template</span><span class="err">&gt;
</span>
<span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ref</span><span class="p">,</span> <span class="nx">onMounted</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">vue</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">useWhiteboardStore</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">../stores/whiteboard</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">io</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">socket.io-client</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">fabric</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">fabric</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">canvas</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">store</span> <span class="o">=</span> <span class="nf">useWhiteboardStore</span><span class="p">();</span>
    <span class="kd">const</span> <span class="nx">socket</span> <span class="o">=</span> <span class="nf">io</span><span class="p">(</span><span class="dl">'</span><span class="s1">http://localhost:3000</span><span class="dl">'</span><span class="p">);</span>
    <span class="kd">let</span> <span class="nx">isDrawing</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">currentColor</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">(</span><span class="dl">'</span><span class="s1">black</span><span class="dl">'</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">fabricCanvas</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">history</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">([]);</span>
    <span class="kd">const</span> <span class="nx">redoStack</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">([]);</span>

    <span class="nf">onMounted</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">fabricCanvas</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">fabric</span><span class="p">.</span><span class="nc">Canvas</span><span class="p">(</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
      <span class="nx">socket</span><span class="p">.</span><span class="nf">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">drawing</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">drawing</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="c1">// 處理接收到的繪圖</span>
      <span class="p">});</span>
    <span class="p">});</span>

    <span class="kd">const</span> <span class="nx">startDrawing</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">isDrawing</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
      <span class="c1">// 繪圖邏輯</span>
    <span class="p">};</span>

    <span class="kd">const</span> <span class="nx">stopDrawing</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">isDrawing</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="c1">// 保存狀態到歷史</span>
      <span class="nx">history</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span><span class="nx">fabricCanvas</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nf">toJSON</span><span class="p">());</span>
      <span class="nx">redoStack</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="p">[];</span> <span class="c1">// 清空重做堆疊</span>
    <span class="p">};</span>

    <span class="kd">const</span> <span class="nx">draw</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if </span><span class="p">(</span><span class="o">!</span><span class="nx">isDrawing</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
      <span class="c1">// 繪圖邏輯</span>
    <span class="p">};</span>

    <span class="kd">const</span> <span class="nx">addRectangle</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">rect</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">fabric</span><span class="p">.</span><span class="nc">Rect</span><span class="p">({</span>
        <span class="na">left</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
        <span class="na">top</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
        <span class="na">fill</span><span class="p">:</span> <span class="nx">currentColor</span><span class="p">.</span><span class="nx">value</span><span class="p">,</span>
        <span class="na">width</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
        <span class="na">height</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
      <span class="p">});</span>
      <span class="nx">fabricCanvas</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="nx">rect</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="kd">const</span> <span class="nx">addCircle</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">circle</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">fabric</span><span class="p">.</span><span class="nc">Circle</span><span class="p">({</span>
        <span class="na">left</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
        <span class="na">top</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
        <span class="na">fill</span><span class="p">:</span> <span class="nx">currentColor</span><span class="p">.</span><span class="nx">value</span><span class="p">,</span>
        <span class="na">radius</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span>
      <span class="p">});</span>
      <span class="nx">fabricCanvas</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="nx">circle</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="kd">const</span> <span class="nx">undo</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if </span><span class="p">(</span><span class="nx">history</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">redoStack</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span><span class="nx">history</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nf">pop</span><span class="p">());</span>
        <span class="nx">fabricCanvas</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nf">loadFromJSON</span><span class="p">(</span><span class="nx">history</span><span class="p">.</span><span class="nx">value</span><span class="p">[</span><span class="nx">history</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]);</span>
      <span class="p">}</span>
    <span class="p">};</span>

    <span class="kd">const</span> <span class="nx">redo</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if </span><span class="p">(</span><span class="nx">redoStack</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">state</span> <span class="o">=</span> <span class="nx">redoStack</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nf">pop</span><span class="p">();</span>
        <span class="nx">history</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span><span class="nx">state</span><span class="p">);</span>
        <span class="nx">fabricCanvas</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nf">loadFromJSON</span><span class="p">(</span><span class="nx">state</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">};</span>

    <span class="kd">const</span> <span class="nx">addImage</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">file</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">files</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
      <span class="kd">const</span> <span class="nx">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FileReader</span><span class="p">();</span>
      <span class="nx">reader</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">fabric</span><span class="p">.</span><span class="nx">Image</span><span class="p">.</span><span class="nf">fromURL</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">result</span><span class="p">,</span> <span class="p">(</span><span class="nx">img</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="nx">fabricCanvas</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="nx">img</span><span class="p">);</span>
        <span class="p">});</span>
      <span class="p">};</span>
      <span class="nx">reader</span><span class="p">.</span><span class="nf">readAsDataURL</span><span class="p">(</span><span class="nx">file</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="k">return</span> <span class="p">{</span> <span class="nx">canvas</span><span class="p">,</span> <span class="nx">startDrawing</span><span class="p">,</span> <span class="nx">stopDrawing</span><span class="p">,</span> <span class="nx">draw</span><span class="p">,</span> <span class="nx">currentColor</span><span class="p">,</span> <span class="nx">addRectangle</span><span class="p">,</span> <span class="nx">addCircle</span><span class="p">,</span> <span class="nx">undo</span><span class="p">,</span> <span class="nx">redo</span><span class="p">,</span> <span class="nx">addImage</span> <span class="p">};</span>
  <span class="p">},</span>
<span class="p">};</span>
<span class="o">&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span>
<span class="o">&lt;</span><span class="nx">style</span> <span class="nx">scoped</span><span class="o">&gt;</span>
<span class="nx">canvas</span> <span class="p">{</span>
  <span class="nl">border</span><span class="p">:</span> <span class="mi">1</span><span class="nx">px</span> <span class="nx">solid</span> <span class="err">#</span><span class="nx">ccc</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span> <span class="mi">100</span><span class="o">%</span><span class="p">;</span>
  <span class="nl">height</span><span class="p">:</span> <span class="mi">500</span><span class="nx">px</span><span class="p">;</span>
<span class="p">}</span>
<span class="o">&lt;</span><span class="sr">/style</span><span class="err">&gt;
</span></code></pre></div></div><h3 id="5-在主應用中使用白板組件">5. 在主應用中使用白板組件</h3><p>最後，我們需要在主應用中引入並使用白板組件，以便用戶可以輕鬆訪問：<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!--</span> <span class="nx">src</span><span class="o">/</span><span class="nx">App</span><span class="p">.</span><span class="nx">vue</span> <span class="o">--&gt;</span>
<span class="o">&lt;</span><span class="nx">template</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="dl">"</span><span class="s2">app</span><span class="dl">"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">Whiteboard</span> <span class="o">/&gt;</span>
  <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="sr">/template</span><span class="err">&gt;
</span>
<span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
<span class="k">import</span> <span class="nx">Whiteboard</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./components/Whiteboard.vue</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="na">components</span><span class="p">:</span> <span class="p">{</span>
    <span class="nx">Whiteboard</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">};</span>
<span class="o">&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span>
<span class="o">&lt;</span><span class="nx">style</span><span class="o">&gt;</span>
<span class="err">#</span><span class="nx">app</span> <span class="p">{</span>
  <span class="nx">font</span><span class="o">-</span><span class="nx">family</span><span class="p">:</span> <span class="nx">Avenir</span><span class="p">,</span> <span class="nx">Helvetica</span><span class="p">,</span> <span class="nx">Arial</span><span class="p">,</span> <span class="nx">sans</span><span class="o">-</span><span class="nx">serif</span><span class="p">;</span>
  <span class="nx">text</span><span class="o">-</span><span class="nx">align</span><span class="p">:</span> <span class="nx">center</span><span class="p">;</span>
  <span class="nl">color</span><span class="p">:</span> <span class="err">#</span><span class="mi">2</span><span class="nx">c3e50</span><span class="p">;</span>
  <span class="nx">margin</span><span class="o">-</span><span class="nx">top</span><span class="p">:</span> <span class="mi">60</span><span class="nx">px</span><span class="p">;</span>
<span class="p">}</span>
<span class="o">&lt;</span><span class="sr">/style</span><span class="err">&gt;
</span></code></pre></div></div><h2 id="總結">總結</h2><p>通過掌握這些進階技巧和最佳實踐，開發者可以使用 Quasar、Vue 3、Pinia、Fabric.js 和 WebSocket 技術高效地構建一個完整的電子白板應用，實現多用戶的實時協作，提升用戶的互動體驗。<ol><li>安裝必要的依賴。<li>配置 Quasar 應用。<li>創建 Pinia 狀態管理。<li>創建白板組件。<li>在主應用中使用白板組件。</ol><h2 id="參考資料">參考資料</h2><ul><li><a href="https://quasar.dev/">Quasar 官方文檔</a><li><a href="https://v3.vuejs.org/">Vue 3 官方文檔</a><li><a href="https://pinia.vuejs.org/">Pinia 官方文檔</a><li><a href="http://fabricjs.com/">Fabric.js 官方文檔</a><li><a href="https://socket.io/docs/">Socket.IO 官方文檔</a></ul><footer><p class="read-more"> Continue reading <a class="heading flip-title" href="/blog/2024-02-21-blog-vue3&whiteboard/">如何使用 Quasar + Vue 3 + Pinia + Fabric.js + WebSocket 打造高效互動式白板</a></footer></article><article id="post-blog-blog-vue3&AI-2" class="page post mb6" role="article"><header><h1 class="post-title flip-project-title"> <a href="/blog/2024-01-13-blog-vue3&AI-2/" class="flip-title"> Vue 3 串接 ChatGPT 進階方法 </a></h1><div class="post-date"> <span class="ellipsis mr1"> <time datetime="2024-01-13T00:00:00+08:00">13 Jan 2024</time> in <span>Blog</span> </span> <span class="ellipsis" data-tippy-content="Last modified at: 15 Sep 2024"> <span class="sr-only">Last modified at:</span> <span class="icon-history"></span> <time datetime="2024-09-15T17:41:34+08:00">2024-09-15</time> </span></div><a href="/blog/2024-01-13-blog-vue3&AI-2/" class="no-hover no-print-link flip-project" tabindex="-1"><div class="img-wrapper lead aspect-ratio sixteen-nine flip-project-img"> <img src="https://www.unimedia.tech/wp-content/uploads/2023/12/openAI-chat-gpt-1-4.jpg" alt="Vue 3 串接 ChatGPT 進階方法" width="864" height="486" loading="lazy" /></div></a></header><ol id="markdown-toc"><li><a href="#前言" id="markdown-toc-前言">前言</a><li><a href="#進階技巧" id="markdown-toc-進階技巧">進階技巧</a><ol><li><a href="#1-安裝-openai-sdk" id="markdown-toc-1-安裝-openai-sdk">1. 安裝 OpenAI SDK</a><li><a href="#2-配置-openai-api" id="markdown-toc-2-配置-openai-api">2. 配置 OpenAI API</a><li><a href="#3-創建-chatgpt-組件" id="markdown-toc-3-創建-chatgpt-組件">3. 創建 ChatGPT 組件</a><li><a href="#4-在主應用中使用-chatgpt-組件" id="markdown-toc-4-在主應用中使用-chatgpt-組件">4. 在主應用中使用 ChatGPT 組件</a></ol><li><a href="#總結" id="markdown-toc-總結">總結</a><li><a href="#參考資料" id="markdown-toc-參考資料">參考資料</a></ol><h2 id="前言">前言</h2><p>在本文中，我們將深入探討如何在 Vue 3 中高效地串接 ChatGPT，幫助開發者利用這些技術來構建更智能、更高效的應用。<h2 id="進階技巧">進階技巧</h2><h3 id="1-安裝-openai-sdk">1. 安裝 OpenAI SDK</h3><p>首先，我們需要安裝 OpenAI 的 SDK 來與 ChatGPT 進行通信：<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install </span>openai

</code></pre></div></div><h3 id="2-配置-openai-api">2. 配置 OpenAI API</h3><p>接下來，我們需要在 Vue 3 應用中配置 OpenAI API：<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// src/api/openai.js</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Configuration</span><span class="p">,</span> <span class="nx">OpenAIApi</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">openai</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Configuration</span><span class="p">({</span>

  <span class="na">apiKey</span><span class="p">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">VUE_APP_OPENAI_API_KEY</span><span class="p">,</span>
<span class="p">});</span>
<span class="kd">const</span> <span class="nx">openai</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">OpenAIApi</span><span class="p">(</span><span class="nx">configuration</span><span class="p">);</span>
<span class="k">export</span> <span class="k">default</span> <span class="nx">openai</span><span class="p">;</span>
</code></pre></div></div><h3 id="3-創建-chatgpt-組件">3. 創建 ChatGPT 組件</h3><p>我們將創建一個 ChatGPT 組件來處理用戶輸入並顯示 ChatGPT 的回應：<div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- src/components/ChatGPT.vue --&gt;</span>
<span class="nt">&lt;</span><span class="k">template</span><span class="nt">&gt;</span>

  <span class="nt">&lt;div&gt;</span>

    <span class="nt">&lt;h1&gt;</span>ChatGPT 聊天<span class="nt">&lt;/h1&gt;</span>

    <span class="nt">&lt;input</span> 

      <span class="na">v-model=</span><span class="s">"userInput"</span> 

      <span class="err">@</span><span class="na">keyup.enter=</span><span class="s">"sendMessage"</span> 

      <span class="na">placeholder=</span><span class="s">"輸入訊息"</span> 

    <span class="nt">/&gt;</span>
    <span class="nt">&lt;button</span> <span class="err">@</span><span class="na">click=</span><span class="s">"sendMessage"</span><span class="nt">&gt;</span>發送<span class="nt">&lt;/button&gt;</span>

    <span class="nt">&lt;div</span> <span class="na">v-if=</span><span class="s">"response"</span><span class="nt">&gt;</span>

      <span class="nt">&lt;h2&gt;</span>回應:<span class="nt">&lt;/h2&gt;</span>

      <span class="nt">&lt;p&gt;&lt;/p&gt;</span>

    <span class="nt">&lt;/div&gt;</span>

  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/</span><span class="k">template</span><span class="nt">&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>

<span class="k">import</span> <span class="nx">openai</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">../api/openai</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>

  <span class="nf">data</span><span class="p">()</span> <span class="p">{</span>

    <span class="k">return</span> <span class="p">{</span>

      <span class="na">userInput</span><span class="p">:</span> <span class="dl">''</span><span class="p">,</span>
      <span class="na">response</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="p">};</span>

  <span class="p">},</span>

  <span class="na">methods</span><span class="p">:</span> <span class="p">{</span>

    <span class="k">async</span> <span class="nf">sendMessage</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">userInput</span><span class="p">.</span><span class="nf">trim</span><span class="p">()</span> <span class="o">===</span> <span class="dl">''</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
      

      <span class="k">try</span> <span class="p">{</span>

        <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">openai</span><span class="p">.</span><span class="nf">createCompletion</span><span class="p">({</span>

          <span class="na">model</span><span class="p">:</span> <span class="dl">'</span><span class="s1">text-davinci-003</span><span class="dl">'</span><span class="p">,</span>

          <span class="na">prompt</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">userInput</span><span class="p">,</span>

          <span class="na">max_tokens</span><span class="p">:</span> <span class="mi">150</span><span class="p">,</span>

        <span class="p">});</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">response</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">text</span><span class="p">.</span><span class="nf">trim</span><span class="p">();</span>

      <span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">與OpenAI通信時出錯:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>

      <span class="p">}</span>
    <span class="p">},</span>

  <span class="p">},</span>
<span class="p">};</span>

<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>

<span class="nt">&lt;</span><span class="k">style</span> <span class="na">scoped</span><span class="nt">&gt;</span>

<span class="nt">input</span> <span class="p">{</span>

  <span class="nl">width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>

  <span class="nl">padding</span><span class="p">:</span> <span class="m">10px</span><span class="p">;</span>

  <span class="nl">margin-bottom</span><span class="p">:</span> <span class="m">10px</span><span class="p">;</span>

<span class="p">}</span>
<span class="nt">button</span> <span class="p">{</span>

  <span class="nl">padding</span><span class="p">:</span> <span class="m">10px</span> <span class="m">20px</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">&lt;/</span><span class="k">style</span><span class="nt">&gt;</span>
</code></pre></div></div><h3 id="4-在主應用中使用-chatgpt-組件">4. 在主應用中使用 ChatGPT 組件</h3><p>最後，我們需要在主應用中引入並使用 ChatGPT 組件：<div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c">&lt;!-- src/App.vue --&gt;</span>
<span class="nt">&lt;</span><span class="k">template</span><span class="nt">&gt;</span>

  <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"app"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;ChatGPT</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/</span><span class="k">template</span><span class="nt">&gt;</span>
<span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
<span class="k">import</span> <span class="nx">ChatGPT</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./components/ChatGPT.vue</span><span class="dl">'</span><span class="p">;</span>
<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>

  <span class="na">components</span><span class="p">:</span> <span class="p">{</span>
    <span class="nx">ChatGPT</span><span class="p">,</span>

  <span class="p">},</span>
<span class="p">};</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
<span class="nt">&lt;</span><span class="k">style</span><span class="nt">&gt;</span>

<span class="nf">#app</span> <span class="p">{</span>
  <span class="nl">font-family</span><span class="p">:</span> <span class="n">Avenir</span><span class="p">,</span> <span class="n">Helvetica</span><span class="p">,</span> <span class="n">Arial</span><span class="p">,</span> <span class="nb">sans-serif</span><span class="p">;</span>
  <span class="nl">text-align</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
  <span class="nl">color</span><span class="p">:</span> <span class="m">#2c3e50</span><span class="p">;</span>

  <span class="nl">margin-top</span><span class="p">:</span> <span class="m">60px</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">&lt;/</span><span class="k">style</span><span class="nt">&gt;</span>

</code></pre></div></div><h2 id="總結">總結</h2><p>通過掌握這些進階技巧和最佳實踐，開發者可以在 Vue 3 中高效地串接 ChatGPT，構建更智能的應用：<ol><li><p>安裝 OpenAI SDK。<li><p>配置 OpenAI API。<li>創建 ChatGPT 組件。<li>在主應用中使用 ChatGPT 組件。</ol><h2 id="參考資料">參考資料</h2><ul><li><p><a href="https://beta.openai.com/docs/">OpenAI 官方文檔</a><li><p><a href="https://v3.vuejs.org/">Vue 3 官方文檔</a></ul><footer><p class="read-more"> Continue reading <a class="heading flip-title" href="/blog/2024-01-13-blog-vue3&AI-2/">Vue 3 串接 ChatGPT 進階方法</a></footer></article><article id="post-blog-blog-vue3&AI-1" class="page post mb6" role="article"><header><h1 class="post-title flip-project-title"> <a href="/blog/2024-01-09-blog-vue3&AI-1/" class="flip-title"> Vue 3 串接 ChatGPT 入門 </a></h1><div class="post-date"> <span class="ellipsis mr1"> <time datetime="2024-01-09T00:00:00+08:00">09 Jan 2024</time> in <span>Blog</span> </span> <span class="ellipsis" data-tippy-content="Last modified at: 15 Sep 2024"> <span class="sr-only">Last modified at:</span> <span class="icon-history"></span> <time datetime="2024-09-15T17:40:44+08:00">2024-09-15</time> </span></div><a href="/blog/2024-01-09-blog-vue3&AI-1/" class="no-hover no-print-link flip-project" tabindex="-1"><div class="img-wrapper lead aspect-ratio sixteen-nine flip-project-img"> <img src="https://www.unimedia.tech/wp-content/uploads/2023/12/openAI-chat-gpt-1-4.jpg" alt="Vue 3 串接 ChatGPT 入門" width="864" height="486" loading="lazy" /></div></a></header><ol id="markdown-toc"><li><a href="#前言" id="markdown-toc-前言">前言</a><li><a href="#進階技巧" id="markdown-toc-進階技巧">進階技巧</a><ol><li><a href="#1-安裝-openai-sdk" id="markdown-toc-1-安裝-openai-sdk">1. 安裝 OpenAI SDK</a><li><a href="#2-配置-openai-api" id="markdown-toc-2-配置-openai-api">2. 配置 OpenAI API</a><li><a href="#3-創建-chatgpt-組件" id="markdown-toc-3-創建-chatgpt-組件">3. 創建 ChatGPT 組件</a><li><a href="#4-在主應用中使用-chatgpt-組件" id="markdown-toc-4-在主應用中使用-chatgpt-組件">4. 在主應用中使用 ChatGPT 組件</a></ol><li><a href="#總結" id="markdown-toc-總結">總結</a><li><a href="#參考資料" id="markdown-toc-參考資料">參考資料</a></ol><h2 id="前言">前言</h2><p>在本文中，我們將探討如何在 Vue 3 中串接 ChatGPT，幫助開發者利用這些技術來構建智能應用。<h2 id="進階技巧">進階技巧</h2><h3 id="1-安裝-openai-sdk">1. 安裝 OpenAI SDK</h3><p>首先，我們需要安裝 OpenAI 的 SDK 來與 ChatGPT 進行通信：<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">bash</span>
<span class="nx">npm</span> <span class="nx">install</span> <span class="nx">openai</span>
</code></pre></div></div><h3 id="2-配置-openai-api">2. 配置 OpenAI API</h3><p>接下來，我們需要在 Vue 3 應用中配置 OpenAI API：<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// src/api/openai.js</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Configuration</span><span class="p">,</span> <span class="nx">OpenAIApi</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">openai</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Configuration</span><span class="p">({</span>
<span class="na">apiKey</span><span class="p">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">VUE_APP_OPENAI_API_KEY</span><span class="p">,</span>
<span class="p">});</span>
<span class="kd">const</span> <span class="nx">openai</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">OpenAIApi</span><span class="p">(</span><span class="nx">configuration</span><span class="p">);</span>
<span class="k">export</span> <span class="k">default</span> <span class="nx">openai</span><span class="p">;</span>
</code></pre></div></div><h3 id="3-創建-chatgpt-組件">3. 創建 ChatGPT 組件</h3><p>我們將創建一個 ChatGPT 組件來處理用戶輸入並顯示 ChatGPT 的回應：<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!--</span> <span class="nx">src</span><span class="o">/</span><span class="nx">components</span><span class="o">/</span><span class="nx">ChatGPT</span><span class="p">.</span><span class="nx">vue</span> <span class="o">--&gt;</span>
<span class="o">&lt;</span><span class="nx">template</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">ChatGPT</span> <span class="nx">聊天</span><span class="o">&lt;</span><span class="sr">/h1</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">input</span> 
      <span class="nx">v</span><span class="o">-</span><span class="nx">model</span><span class="o">=</span><span class="dl">"</span><span class="s2">userInput</span><span class="dl">"</span> 
      <span class="p">@</span><span class="nd">keyup</span><span class="p">.</span><span class="nx">enter</span><span class="o">=</span><span class="dl">"</span><span class="s2">sendMessage</span><span class="dl">"</span> 
      <span class="nx">placeholder</span><span class="o">=</span><span class="dl">"</span><span class="s2">輸入訊息</span><span class="dl">"</span> 
    <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="nx">button</span> <span class="p">@</span><span class="nd">click</span><span class="o">=</span><span class="dl">"</span><span class="s2">sendMessage</span><span class="dl">"</span><span class="o">&gt;</span><span class="nx">發送</span><span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">v</span><span class="o">-</span><span class="k">if</span><span class="o">=</span><span class="dl">"</span><span class="s2">response</span><span class="dl">"</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">h2</span><span class="o">&gt;</span><span class="nx">回應</span><span class="p">:</span><span class="o">&lt;</span><span class="sr">/h2</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;&lt;</span><span class="sr">/p</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>  <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="sr">/template</span><span class="err">&gt;
</span>
<span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
<span class="k">import</span> <span class="nx">openai</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">../api/openai</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nf">data</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="na">userInput</span><span class="p">:</span> <span class="dl">''</span><span class="p">,</span>
      <span class="na">response</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="p">};</span>
  <span class="p">},</span>
  <span class="na">methods</span><span class="p">:</span> <span class="p">{</span>
    <span class="k">async</span> <span class="nf">sendMessage</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">userInput</span><span class="p">.</span><span class="nf">trim</span><span class="p">()</span> <span class="o">===</span> <span class="dl">''</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
      
      <span class="k">try</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">openai</span><span class="p">.</span><span class="nf">createCompletion</span><span class="p">({</span>
          <span class="na">model</span><span class="p">:</span> <span class="dl">'</span><span class="s1">text-davinci-003</span><span class="dl">'</span><span class="p">,</span>
          <span class="na">prompt</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">userInput</span><span class="p">,</span>
          <span class="na">max_tokens</span><span class="p">:</span> <span class="mi">150</span><span class="p">,</span>
        <span class="p">});</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">response</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">text</span><span class="p">.</span><span class="nf">trim</span><span class="p">();</span>
      <span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">與OpenAI通信時出錯:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">},</span>
  <span class="p">},</span>
<span class="p">};</span>
<span class="o">&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span>
<span class="o">&lt;</span><span class="nx">style</span> <span class="nx">scoped</span><span class="o">&gt;</span>
<span class="nx">input</span> <span class="p">{</span>
  <span class="nl">width</span><span class="p">:</span> <span class="mi">100</span><span class="o">%</span><span class="p">;</span>
  <span class="nl">padding</span><span class="p">:</span> <span class="mi">10</span><span class="nx">px</span><span class="p">;</span>
  <span class="nx">margin</span><span class="o">-</span><span class="nx">bottom</span><span class="p">:</span> <span class="mi">10</span><span class="nx">px</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">button</span> <span class="p">{</span>
  <span class="nl">padding</span><span class="p">:</span> <span class="mi">10</span><span class="nx">px</span> <span class="mi">20</span><span class="nx">px</span><span class="p">;</span>
<span class="p">}</span>
<span class="o">&lt;</span><span class="sr">/style</span><span class="err">&gt;
</span></code></pre></div></div><h3 id="4-在主應用中使用-chatgpt-組件">4. 在主應用中使用 ChatGPT 組件</h3><p>最後，我們需要在主應用中引入並使用 ChatGPT 組件：<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!--</span> <span class="nx">src</span><span class="o">/</span><span class="nx">App</span><span class="p">.</span><span class="nx">vue</span> <span class="o">--&gt;</span>
<span class="o">&lt;</span><span class="nx">template</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="dl">"</span><span class="s2">app</span><span class="dl">"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">ChatGPT</span> <span class="o">/&gt;</span>
  <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="sr">/template</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
  <span class="k">import</span> <span class="nx">ChatGPT</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./components/ChatGPT.vue</span><span class="dl">'</span><span class="p">;</span>
  <span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
    <span class="na">components</span><span class="p">:</span> <span class="p">{</span>
    <span class="nx">ChatGPT</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">};</span>
<span class="o">&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="nx">style</span><span class="o">&gt;</span>
<span class="err">#</span><span class="nx">app</span> <span class="p">{</span>
  <span class="nx">font</span><span class="o">-</span><span class="nx">family</span><span class="p">:</span> <span class="nx">Avenir</span><span class="p">,</span> <span class="nx">Helvetica</span><span class="p">,</span> <span class="nx">Arial</span><span class="p">,</span> <span class="nx">sans</span><span class="o">-</span><span class="nx">serif</span><span class="p">;</span>
  <span class="nx">text</span><span class="o">-</span><span class="nx">align</span><span class="p">:</span> <span class="nx">center</span><span class="p">;</span>
  <span class="nl">color</span><span class="p">:</span> <span class="err">#</span><span class="mi">2</span><span class="nx">c3e50</span><span class="p">;</span>
  <span class="nx">margin</span><span class="o">-</span><span class="nx">top</span><span class="p">:</span> <span class="mi">60</span><span class="nx">px</span><span class="p">;</span>
  <span class="p">}</span>
<span class="o">&lt;</span><span class="sr">/style</span><span class="err">&gt;
</span></code></pre></div></div><h2 id="總結">總結</h2><p>通過掌握這些技巧和最佳實踐，開發者可以在 Vue 3 中輕鬆串接 ChatGPT，構建智能應用：<ol><li>安裝 OpenAI SDK。<li>配置 OpenAI API。<li>創建 ChatGPT 組件。<li>在主應用中使用 ChatGPT 組件。</ol><h2 id="參考資料">參考資料</h2><ul><li><a href="https://beta.openai.com/docs/">OpenAI 官方文檔</a><li><a href="https://v3.vuejs.org/">Vue 3 官方文檔</a></ul><footer><p class="read-more"> Continue reading <a class="heading flip-title" href="/blog/2024-01-09-blog-vue3&AI-1/">Vue 3 串接 ChatGPT 入門</a></footer></article><article id="post-blog-blog-Monorepo&Docker" class="page post mb6" role="article"><header><h1 class="post-title flip-project-title"> <a href="/blog/2023-04-25-blog-Monorepo&Docker/" class="flip-title"> Monorepo 與 Docker 的應用技巧 </a></h1><div class="post-date"> <span class="ellipsis mr1"> <time datetime="2023-04-25T00:00:00+08:00">25 Apr 2023</time> in <span>Blog</span> </span> <span class="ellipsis" data-tippy-content="Last modified at: 14 Sep 2024"> <span class="sr-only">Last modified at:</span> <span class="icon-history"></span> <time datetime="2024-09-14T22:31:29+08:00">2024-09-14</time> </span></div><a href="/blog/2023-04-25-blog-Monorepo&Docker/" class="no-hover no-print-link flip-project" tabindex="-1"><div class="img-wrapper lead aspect-ratio sixteen-nine flip-project-img"> <img src="https://miro.medium.com/v2/resize:fit:2000/1*vQK4s0lOiK1ZkcXxFNIMDQ.png" alt="Monorepo 與 Docker 的應用技巧" width="864" height="486" loading="lazy" /></div></a></header><ol id="markdown-toc"><li><a href="#前言" id="markdown-toc-前言">前言</a><li><a href="#monorepo-簡介" id="markdown-toc-monorepo-簡介">Monorepo 簡介</a><li><a href="#docker-簡介" id="markdown-toc-docker-簡介">Docker 簡介</a><li><a href="#設置-monorepo-和-docker" id="markdown-toc-設置-monorepo-和-docker">設置 Monorepo 和 Docker</a><ol><li><a href="#1-初始化-nx-工作區" id="markdown-toc-1-初始化-nx-工作區">1. 初始化 Nx 工作區</a><li><a href="#2-添加-vue-應用" id="markdown-toc-2-添加-vue-應用">2. 添加 Vue 應用</a><li><a href="#3-添加-docker-支持" id="markdown-toc-3-添加-docker-支持">3. 添加 Docker 支持</a><li><a href="#4-創建-docker-compose-文件" id="markdown-toc-4-創建-docker-compose-文件">4. 創建 Docker Compose 文件</a></ol><li><a href="#在-monorepo-中使用-docker" id="markdown-toc-在-monorepo-中使用-docker">在 Monorepo 中使用 Docker</a><ol><li><a href="#1-本地開發" id="markdown-toc-1-本地開發">1. 本地開發</a><li><a href="#2-部署到生產環境" id="markdown-toc-2-部署到生產環境">2. 部署到生產環境</a></ol><li><a href="#總結" id="markdown-toc-總結">總結</a><li><a href="#參考資料" id="markdown-toc-參考資料">參考資料</a></ol><h2 id="前言">前言</h2><p>在現代前端開發中，Monorepo 和 Docker 是兩個強大的工具。Monorepo 可以幫助我們更好地管理大型代碼庫，而 Docker 則提供了輕量級的容器化解決方案。本文將介紹如何將這兩者結合起來，提升開發效率和應用性能。<h2 id="monorepo-簡介">Monorepo 簡介</h2><p>Monorepo 是指將多個項目存放在同一個代碼庫中，這樣可以更好地管理依賴關係、共享代碼和統一配置。常見的 Monorepo 工具有 Lerna 和 Nx。<h2 id="docker-簡介">Docker 簡介</h2><p>Docker 是一個開源的平台，通過容器化技術來實現應用的快速部署和運行。它可以將應用及其依賴打包成一個輕量級、可移植的容器，從而實現跨環境的一致性。<h2 id="設置-monorepo-和-docker">設置 Monorepo 和 Docker</h2><h3 id="1-初始化-nx-工作區">1. 初始化 Nx 工作區</h3><p>首先，我們需要設置一個 Monorepo。這裡我們使用 Nx 作為示例。<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npx create-nx-workspace@latest my-workspace
<span class="nb">cd </span>my-workspace
</code></pre></div></div><h3 id="2-添加-vue-應用">2. 添加 Vue 應用</h3><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nx generate @nx-plus/vue:application my-app
</code></pre></div></div><h3 id="3-添加-docker-支持">3. 添加 Docker 支持</h3><p>在應用中添加 Docker 支持，首先需要創建一個 Dockerfile。<div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;!-- apps/my-app/Dockerfile --&gt;
# 使用官方的 Node.js 圖像作為基礎圖像
<span class="k">FROM</span><span class="s"> node:16-alpine</span>

<span class="c"># 設置工作目錄</span>
<span class="k">WORKDIR</span><span class="s"> /app</span>

<span class="c"># 複製 package.json 和 package-lock.json</span>
<span class="k">COPY</span><span class="s"> package*.json ./</span>

<span class="c"># 安裝依賴</span>
<span class="k">RUN </span>npm <span class="nb">install</span>

<span class="c"># 複製應用代碼</span>
<span class="k">COPY</span><span class="s"> . .</span>

<span class="c"># 構建應用</span>
<span class="k">RUN </span>npm run build

<span class="c"># 暴露應用運行的端口</span>
<span class="k">EXPOSE</span><span class="s"> 3000</span>

<span class="c"># 啟動應用</span>
<span class="k">CMD</span><span class="s"> ["npm", "start"]</span>
</code></pre></div></div><h3 id="4-創建-docker-compose-文件">4. 創建 Docker Compose 文件</h3><p>為了更方便地管理多個容器，我們可以使用 Docker Compose。<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">&lt;!-- docker-compose.yml --&gt;</span>
<span class="na">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3.8'</span>
<span class="na">services</span><span class="pi">:</span>
  <span class="na">my-app</span><span class="pi">:</span>
    <span class="na">build</span><span class="pi">:</span>
      <span class="na">context</span><span class="pi">:</span> <span class="s">./apps/my-app</span>
      <span class="na">dockerfile</span><span class="pi">:</span> <span class="s">Dockerfile</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">3000:3000"</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">./apps/my-app:/app</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">NODE_ENV=development</span>
</code></pre></div></div><h2 id="在-monorepo-中使用-docker">在 Monorepo 中使用 Docker</h2><h3 id="1-本地開發">1. 本地開發</h3><p>在本地開發中，我們可以使用 Docker Compose 來啟動應用。<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker-compose up <span class="nt">--build</span>
</code></pre></div></div><h3 id="2-部署到生產環境">2. 部署到生產環境</h3><p>在生產環境中，我們可以將應用打包成 Docker 映像，並推送到 Docker Hub 或其他容器託管服務。<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 登錄到 Docker Hub</span>
docker login

<span class="c"># 構建 Docker 映像</span>
docker build <span class="nt">-t</span> my-app:latest ./apps/my-app

<span class="c"># 推送 Docker 映像</span>
docker push my-app:latest
</code></pre></div></div><h2 id="總結">總結</h2><p>通過將 Monorepo 和 Docker 結合，我們可以顯著提升開發效率和應用性能：<ol><li>Monorepo 提供了更好的代碼管理和依賴管理。<li>Docker 提供了輕量級的容器化解決方案，實現跨環境的一致性。<li>Docker Compose 使得多容器應用的管理更加方便。</ol><p>這些應用技巧讓我們能夠更好地管理大型代碼庫，實現高效的開發和部署流程。<h2 id="參考資料">參考資料</h2><ul><li><a href="https://nx.dev/">Nx 官方文檔</a><li><a href="https://docs.docker.com/">Docker 官方文檔</a><li><a href="https://hub.docker.com/">Docker Hub</a></ul><footer><p class="read-more"> Continue reading <a class="heading flip-title" href="/blog/2023-04-25-blog-Monorepo&Docker/">Monorepo 與 Docker 的應用技巧</a></footer></article><article id="post-blog-blog-Monorepo&react18-1" class="page post mb6" role="article"><header><h1 class="post-title flip-project-title"> <a href="/blog/2023-03-16-blog-Monorepo&react18-1/" class="flip-title"> React 18 與 Monorepo 的實際應用 </a></h1><div class="post-date"> <span class="ellipsis mr1"> <time datetime="2023-03-16T00:00:00+08:00">16 Mar 2023</time> in <span>Blog</span> </span> <span class="ellipsis" data-tippy-content="Last modified at: 14 Sep 2024"> <span class="sr-only">Last modified at:</span> <span class="icon-history"></span> <time datetime="2024-09-14T22:31:29+08:00">2024-09-14</time> </span></div><a href="/blog/2023-03-16-blog-Monorepo&react18-1/" class="no-hover no-print-link flip-project" tabindex="-1"><div class="img-wrapper lead aspect-ratio sixteen-nine flip-project-img"> <img src="https://miro.medium.com/max/1400/1*HSisLuifMO6KbLfPOKtLow.jpeg" alt="React 18 與 Monorepo 的實際應用" width="864" height="486" loading="lazy" /></div></a></header><ol id="markdown-toc"><li><a href="#前言" id="markdown-toc-前言">前言</a><li><a href="#monorepo-簡介" id="markdown-toc-monorepo-簡介">Monorepo 簡介</a><li><a href="#設置-monorepo" id="markdown-toc-設置-monorepo">設置 Monorepo</a><ol><li><a href="#1-初始化-nx-工作區" id="markdown-toc-1-初始化-nx-工作區">1. 初始化 Nx 工作區</a><li><a href="#2-添加-react-應用" id="markdown-toc-2-添加-react-應用">2. 添加 React 應用</a><li><a href="#3-添加-react-庫" id="markdown-toc-3-添加-react-庫">3. 添加 React 庫</a></ol><li><a href="#在-monorepo-中使用-react-18" id="markdown-toc-在-monorepo-中使用-react-18">在 Monorepo 中使用 React 18</a><ol><li><a href="#1-concurrent-mode" id="markdown-toc-1-concurrent-mode">1. Concurrent Mode</a><li><a href="#2-automatic-batching" id="markdown-toc-2-automatic-batching">2. Automatic Batching</a><li><a href="#3-suspense-for-data-fetching" id="markdown-toc-3-suspense-for-data-fetching">3. Suspense for Data Fetching</a></ol><li><a href="#總結" id="markdown-toc-總結">總結</a><li><a href="#參考資料" id="markdown-toc-參考資料">參考資料</a></ol><h2 id="前言">前言</h2><p>在現代前端開發中，Monorepo 已經成為管理大型代碼庫的一種流行方式。React 18 帶來了許多新特性，這些特性在 Monorepo 中的應用可以進一步提升開發效率和應用性能。本文將介紹如何在 Monorepo 中實際應用 React 18。<h2 id="monorepo-簡介">Monorepo 簡介</h2><p>Monorepo 是指將多個項目存放在同一個代碼庫中，這樣可以更好地管理依賴關係、共享代碼和統一配置。常見的 Monorepo 工具有 Lerna 和 Nx。<h2 id="設置-monorepo">設置 Monorepo</h2><p>首先，我們需要設置一個 Monorepo。這裡我們使用 Nx 作為示例。<h3 id="1-初始化-nx-工作區">1. 初始化 Nx 工作區</h3><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">bash</span>
<span class="nx">npx</span> <span class="nx">create</span><span class="o">-</span><span class="nx">nx</span><span class="o">-</span><span class="nx">workspace</span><span class="p">@</span><span class="nd">latest</span> <span class="nx">my</span><span class="o">-</span><span class="nx">workspace</span>
<span class="nx">cd</span> <span class="nx">my</span><span class="o">-</span><span class="nx">workspace</span>
</code></pre></div></div><h3 id="2-添加-react-應用">2. 添加 React 應用</h3><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">bash</span>
<span class="nx">nx</span> <span class="nx">generate</span> <span class="p">@</span><span class="nd">nrwl</span><span class="sr">/react:application my-ap</span><span class="err">p
</span></code></pre></div></div><h3 id="3-添加-react-庫">3. 添加 React 庫</h3><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">bash</span>
<span class="nx">nx</span> <span class="nx">generate</span> <span class="p">@</span><span class="nd">nrwl</span><span class="sr">/react:library my-li</span><span class="err">b
</span></code></pre></div></div><h2 id="在-monorepo-中使用-react-18">在 Monorepo 中使用 React 18</h2><h3 id="1-concurrent-mode">1. Concurrent Mode</h3><p>在 Monorepo 中，我們可以在應用和庫中使用 React 18 的 Concurrent Mode 來提升性能。<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// apps/my-app/src/app/app.tsx</span>
<span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">useState</span><span class="p">,</span> <span class="nx">useTransition</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">function</span> <span class="nf">App</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">isPending</span><span class="p">,</span> <span class="nx">startTransition</span><span class="p">]</span> <span class="o">=</span> <span class="nf">useTransition</span><span class="p">();</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">count</span><span class="p">,</span> <span class="nx">setCount</span><span class="p">]</span> <span class="o">=</span> <span class="nf">useState</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

  <span class="kd">const</span> <span class="nx">handleClick</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nf">startTransition</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nf">setCount</span><span class="p">(</span><span class="nx">c</span> <span class="o">=&gt;</span> <span class="nx">c</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">};</span>

  <span class="k">return </span><span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">計數</span><span class="p">:</span> <span class="p">{</span><span class="nx">count</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/h1</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">handleClick</span><span class="p">}</span> <span class="nx">disabled</span><span class="o">=</span><span class="p">{</span><span class="nx">isPending</span><span class="p">}</span><span class="o">&gt;</span>
        <span class="p">{</span><span class="nx">isPending</span> <span class="p">?</span> <span class="dl">'</span><span class="s1">更新中...</span><span class="dl">'</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">增加</span><span class="dl">'</span><span class="p">}</span>
      <span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">App</span><span class="p">;</span>
</code></pre></div></div><h3 id="2-automatic-batching">2. Automatic Batching</h3><p>自動批處理功能可以在 Monorepo 中的多個應用和庫中使用，以減少重新渲染次數。<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// libs/my-lib/src/lib/my-lib.tsx</span>
<span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">useState</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">function</span> <span class="nf">MyLib</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">count</span><span class="p">,</span> <span class="nx">setCount</span><span class="p">]</span> <span class="o">=</span> <span class="nf">useState</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">text</span><span class="p">,</span> <span class="nx">setText</span><span class="p">]</span> <span class="o">=</span> <span class="nf">useState</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span>

  <span class="kd">const</span> <span class="nx">handleClick</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nf">setCount</span><span class="p">(</span><span class="nx">c</span> <span class="o">=&gt;</span> <span class="nx">c</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
    <span class="nf">setText</span><span class="p">(</span><span class="dl">'</span><span class="s1">計數已更新</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="k">return </span><span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">計數</span><span class="p">:</span> <span class="p">{</span><span class="nx">count</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/h1</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">text</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/p</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">handleClick</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">增加</span><span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div><h3 id="3-suspense-for-data-fetching">3. Suspense for Data Fetching</h3><p>在 Monorepo 中，我們可以使用 Suspense 來處理數據加載，這使得異步操作更加簡單和直觀。<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// apps/my-app/src/app/app.tsx</span>
<span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">Suspense</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">MyLib</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@my-workspace/my-lib</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">DataComponent</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nf">lazy</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="k">import</span><span class="p">(</span><span class="dl">'</span><span class="s1">./data-component</span><span class="dl">'</span><span class="p">));</span>

<span class="kd">function</span> <span class="nf">App</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return </span><span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">React</span> <span class="mi">18</span> <span class="nx">與</span> <span class="nx">Monorepo</span><span class="o">&lt;</span><span class="sr">/h1</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">Suspense</span> <span class="nx">fallback</span><span class="o">=</span><span class="p">{</span><span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nx">加載中</span><span class="p">...</span><span class="o">&lt;</span><span class="sr">/div&gt;}</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">DataComponent</span> <span class="o">/&gt;</span>
      <span class="o">&lt;</span><span class="sr">/Suspense</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">MyLib</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">App</span><span class="p">;</span>
</code></pre></div></div><h2 id="總結">總結</h2><p>通過在 Monorepo 中應用 React 18 的新特性，我們可以顯著提升開發效率和應用性能：<ol><li>Concurrent Mode 提升了應用的響應速度。<li>Automatic Batching 減少了重新渲染次數。<li>Suspense for Data Fetching 使異步操作更加簡單。</ol><p>這些特性在 Monorepo 中的應用，讓我們能夠更好地管理大型代碼庫，實現高效的開發流程。<h2 id="參考資料">參考資料</h2><ul><li><a href="https://reactjs.org/">React 官方文檔</a><li><a href="https://nx.dev/">Nx 官方文檔</a><li><a href="https://reactjs.org/blog/2022/03/29/react-v18.html">React 18 發布公告</a></ul><footer><p class="read-more"> Continue reading <a class="heading flip-title" href="/blog/2023-03-16-blog-Monorepo&react18-1/">React 18 與 Monorepo 的實際應用</a></footer></article><article id="post-blog-blog-Monorepo&vue3-1" class="page post mb6" role="article"><header><h1 class="post-title flip-project-title"> <a href="/blog/2023-03-08-blog-Monorepo&vue3-1/" class="flip-title"> Vue 3 與 Monorepo 的實際應用 </a></h1><div class="post-date"> <span class="ellipsis mr1"> <time datetime="2023-03-08T00:00:00+08:00">08 Mar 2023</time> in <span>Blog</span> </span> <span class="ellipsis" data-tippy-content="Last modified at: 14 Sep 2024"> <span class="sr-only">Last modified at:</span> <span class="icon-history"></span> <time datetime="2024-09-14T22:31:29+08:00">2024-09-14</time> </span></div><a href="/blog/2023-03-08-blog-Monorepo&vue3-1/" class="no-hover no-print-link flip-project" tabindex="-1"><div class="img-wrapper lead aspect-ratio sixteen-nine flip-project-img"> <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSREpZ70jN673LVo1EE5S2uQJePHhk-dl9M_A&s" alt="Vue 3 與 Monorepo 的實際應用" width="864" height="486" loading="lazy" /></div></a></header><ol id="markdown-toc"><li><a href="#前言" id="markdown-toc-前言">前言</a><li><a href="#monorepo-簡介" id="markdown-toc-monorepo-簡介">Monorepo 簡介</a><li><a href="#設置-monorepo" id="markdown-toc-設置-monorepo">設置 Monorepo</a><ol><li><a href="#1-初始化-nx-工作區" id="markdown-toc-1-初始化-nx-工作區">1. 初始化 Nx 工作區</a><li><a href="#2-添加-vue-應用" id="markdown-toc-2-添加-vue-應用">2. 添加 Vue 應用</a><li><a href="#3-添加-vue-庫" id="markdown-toc-3-添加-vue-庫">3. 添加 Vue 庫</a></ol><li><a href="#在-monorepo-中使用-vue-3" id="markdown-toc-在-monorepo-中使用-vue-3">在 Monorepo 中使用 Vue 3</a><ol><li><a href="#1-composition-api" id="markdown-toc-1-composition-api">1. Composition API</a><li><a href="#2-teleport" id="markdown-toc-2-teleport">2. Teleport</a><li><a href="#3-suspense" id="markdown-toc-3-suspense">3. Suspense</a></ol><li><a href="#總結" id="markdown-toc-總結">總結</a><li><a href="#參考資料" id="markdown-toc-參考資料">參考資料</a></ol><h2 id="前言">前言</h2><p>在現代前端開發中，Monorepo 已經成為管理大型代碼庫的一種流行方式。Vue 3 帶來了許多新特性，這些特性在 Monorepo 中的應用可以進一步提升開發效率和應用性能。本文將介紹如何在 Monorepo 中實際應用 Vue 3。<h2 id="monorepo-簡介">Monorepo 簡介</h2><p>Monorepo 是指將多個項目存放在同一個代碼庫中，這樣可以更好地管理依賴關係、共享代碼和統一配置。常見的 Monorepo 工具有 Lerna 和 Nx。<h2 id="設置-monorepo">設置 Monorepo</h2><p>首先，我們需要設置一個 Monorepo。這裡我們使用 Nx 作為示例。<h3 id="1-初始化-nx-工作區">1. 初始化 Nx 工作區</h3><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npx create-nx-workspace@latest my-workspace
<span class="nb">cd </span>my-workspace
</code></pre></div></div><h3 id="2-添加-vue-應用">2. 添加 Vue 應用</h3><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nx generate @nx-plus/vue:application my-app
</code></pre></div></div><h3 id="3-添加-vue-庫">3. 添加 Vue 庫</h3><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nx generate @nx-plus/vue:library my-lib
</code></pre></div></div><h2 id="在-monorepo-中使用-vue-3">在 Monorepo 中使用 Vue 3</h2><h3 id="1-composition-api">1. Composition API</h3><p>在 Monorepo 中，我們可以在應用和庫中使用 Vue 3 的 Composition API 來提升開發體驗。<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!--</span> <span class="nx">apps</span><span class="o">/</span><span class="nx">my</span><span class="o">-</span><span class="nx">app</span><span class="o">/</span><span class="nx">src</span><span class="o">/</span><span class="nx">App</span><span class="p">.</span><span class="nx">vue</span> <span class="o">--&gt;</span>
<span class="o">&lt;</span><span class="nx">template</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">計數</span><span class="p">:</span> <span class="mi">9</span><span class="o">&lt;</span><span class="sr">/h1</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">button</span> <span class="p">@</span><span class="nd">click</span><span class="o">=</span><span class="dl">"</span><span class="s2">increment</span><span class="dl">"</span><span class="o">&gt;</span><span class="nx">增加</span><span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span>  <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="sr">/template</span><span class="err">&gt;
</span>
<span class="o">&lt;</span><span class="nx">script</span> <span class="nx">setup</span><span class="o">&gt;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ref</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">vue</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">count</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

<span class="kd">function</span> <span class="nf">increment</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">count</span><span class="p">.</span><span class="nx">value</span><span class="o">++</span><span class="p">;</span>
<span class="p">}</span>
<span class="o">&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span></code></pre></div></div><h3 id="2-teleport">2. Teleport</h3><p>Teleport 功能可以在 Monorepo 中的多個應用和庫中使用，以便更靈活地管理 DOM 結構。<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!--</span> <span class="nx">libs</span><span class="o">/</span><span class="nx">my</span><span class="o">-</span><span class="nx">lib</span><span class="o">/</span><span class="nx">src</span><span class="o">/</span><span class="nx">lib</span><span class="o">/</span><span class="nx">MyLib</span><span class="p">.</span><span class="nx">vue</span> <span class="o">--&gt;</span>
<span class="o">&lt;</span><span class="nx">template</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">計數</span><span class="p">:</span> <span class="mi">9</span><span class="o">&lt;</span><span class="sr">/h1</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;&lt;</span><span class="sr">/p</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">button</span> <span class="p">@</span><span class="nd">click</span><span class="o">=</span><span class="dl">"</span><span class="s2">handleClick</span><span class="dl">"</span><span class="o">&gt;</span><span class="nx">增加</span><span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">teleport</span> <span class="nx">to</span><span class="o">=</span><span class="dl">"</span><span class="s2">body</span><span class="dl">"</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">div</span> <span class="kd">class</span><span class="o">=</span><span class="dl">"</span><span class="s2">modal</span><span class="dl">"</span><span class="o">&gt;</span><span class="nx">這是一個模態框</span><span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/teleport</span><span class="err">&gt;
</span>  <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="sr">/template</span><span class="err">&gt;
</span>
<span class="o">&lt;</span><span class="nx">script</span> <span class="nx">setup</span><span class="o">&gt;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ref</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">vue</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">count</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">text</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span>

<span class="kd">function</span> <span class="nf">handleClick</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">count</span><span class="p">.</span><span class="nx">value</span><span class="o">++</span><span class="p">;</span>
  <span class="nx">text</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">計數已更新</span><span class="dl">'</span><span class="p">;</span>
<span class="p">}</span>
<span class="o">&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span></code></pre></div></div><h3 id="3-suspense">3. Suspense</h3><p>在 Monorepo 中，我們可以使用 Suspense 來處理數據加載，這使得異步操作更加簡單和直觀。<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!--</span> <span class="nx">apps</span><span class="o">/</span><span class="nx">my</span><span class="o">-</span><span class="nx">app</span><span class="o">/</span><span class="nx">src</span><span class="o">/</span><span class="nx">App</span><span class="p">.</span><span class="nx">vue</span> <span class="o">--&gt;</span>
<span class="o">&lt;</span><span class="nx">template</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">Vue</span> <span class="mi">3</span> <span class="nx">與</span> <span class="nx">Monorepo</span><span class="o">&lt;</span><span class="sr">/h1</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">Suspense</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">template</span> <span class="err">#</span><span class="k">default</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">DataComponent</span> <span class="o">/&gt;</span>
      <span class="o">&lt;</span><span class="sr">/template</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">template</span> <span class="err">#</span><span class="nx">fallback</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nx">加載中</span><span class="p">...</span><span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/template</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/Suspense</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">MyLib</span> <span class="o">/&gt;</span>
  <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="sr">/template</span><span class="err">&gt;
</span>
<span class="o">&lt;</span><span class="nx">script</span> <span class="nx">setup</span><span class="o">&gt;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">defineAsyncComponent</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">vue</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">MyLib</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@my-workspace/my-lib</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">DataComponent</span> <span class="o">=</span> <span class="nf">defineAsyncComponent</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="k">import</span><span class="p">(</span><span class="dl">'</span><span class="s1">./DataComponent.vue</span><span class="dl">'</span><span class="p">));</span>
<span class="o">&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span></code></pre></div></div><h2 id="總結">總結</h2><p>通過在 Monorepo 中應用 Vue 3 的新特性，我們可以顯著提升開發效率和應用性能：<ol><li>Composition API 提升了開發體驗。<li>Teleport 提供了更靈活的 DOM 管理。<li>Suspense 使異步操作更加簡單。</ol><p>這些特性在 Monorepo 中的應用，讓我們能夠更好地管理大型代碼庫，實現高效的開發流程。<h2 id="參考資料">參考資料</h2><ul><li><a href="https://vuejs.org/">Vue 官方文檔</a><li><a href="https://nx.dev/">Nx 官方文檔</a><li><a href="https://v3.vuejs.org/guide/migration/introduction.html">Vue 3 發布公告</a></ul><footer><p class="read-more"> Continue reading <a class="heading flip-title" href="/blog/2023-03-08-blog-Monorepo&vue3-1/">Vue 3 與 Monorepo 的實際應用</a></footer></article><article id="post-blog-blog-react18-1" class="page post mb6" role="article"><header><h1 class="post-title flip-project-title"> <a href="/blog/2023-03-03-blog-react18-1/" class="flip-title"> React 18 的重點特性與應用 </a></h1><div class="post-date"> <span class="ellipsis mr1"> <time datetime="2023-03-03T00:00:00+08:00">03 Mar 2023</time> in <span>Blog</span> </span> <span class="ellipsis" data-tippy-content="Last modified at: 14 Sep 2024"> <span class="sr-only">Last modified at:</span> <span class="icon-history"></span> <time datetime="2024-09-14T22:31:29+08:00">2024-09-14</time> </span></div><a href="/blog/2023-03-03-blog-react18-1/" class="no-hover no-print-link flip-project" tabindex="-1"><div class="img-wrapper lead aspect-ratio sixteen-nine flip-project-img"> <img src="https://miro.medium.com/max/1400/1*HSisLuifMO6KbLfPOKtLow.jpeg" alt="React 18 的重點特性與應用" width="864" height="486" loading="lazy" /></div></a></header><ol id="markdown-toc"><li><a href="#前言" id="markdown-toc-前言">前言</a><li><a href="#react-18-的重點特性" id="markdown-toc-react-18-的重點特性">React 18 的重點特性</a><ol><li><a href="#1-concurrent-mode" id="markdown-toc-1-concurrent-mode">1. Concurrent Mode</a><li><a href="#2-automatic-batching" id="markdown-toc-2-automatic-batching">2. Automatic Batching</a><li><a href="#3-suspense-for-data-fetching" id="markdown-toc-3-suspense-for-data-fetching">3. Suspense for Data Fetching</a><li><a href="#4-新的-hooks" id="markdown-toc-4-新的-hooks">4. 新的 Hooks</a><li><a href="#5-改進的-ssr-和-hydration" id="markdown-toc-5-改進的-ssr-和-hydration">5. 改進的 SSR 和 Hydration</a></ol><li><a href="#總結" id="markdown-toc-總結">總結</a><li><a href="#參考資料" id="markdown-toc-參考資料">參考資料</a></ol><h2 id="前言">前言</h2><p>React 18 帶來了許多重要的更新和改進，這些新特性旨在提升開發者的生產力和應用的性能。本文將介紹 React 18 的一些重點特性，並展示如何在實際應用中利用它們。<h2 id="react-18-的重點特性">React 18 的重點特性</h2><h3 id="1-concurrent-mode">1. Concurrent Mode</h3><p>Concurrent Mode 是 React 18 的一個重要特性，它允許 React 更高效地處理多任務，提升應用的響應速度。<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">useState</span><span class="p">,</span> <span class="nx">useTransition</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">function</span> <span class="nf">App</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">isPending</span><span class="p">,</span> <span class="nx">startTransition</span><span class="p">]</span> <span class="o">=</span> <span class="nf">useTransition</span><span class="p">();</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">count</span><span class="p">,</span> <span class="nx">setCount</span><span class="p">]</span> <span class="o">=</span> <span class="nf">useState</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

  <span class="kd">const</span> <span class="nx">handleClick</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nf">startTransition</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nf">setCount</span><span class="p">(</span><span class="nx">c</span> <span class="o">=&gt;</span> <span class="nx">c</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">};</span>

  <span class="k">return </span><span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">計數</span><span class="p">:</span> <span class="p">{</span><span class="nx">count</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/h1</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">handleClick</span><span class="p">}</span> <span class="nx">disabled</span><span class="o">=</span><span class="p">{</span><span class="nx">isPending</span><span class="p">}</span><span class="o">&gt;</span>
        <span class="p">{</span><span class="nx">isPending</span> <span class="p">?</span> <span class="dl">'</span><span class="s1">更新中...</span><span class="dl">'</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">增加</span><span class="dl">'</span><span class="p">}</span>
      <span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">App</span><span class="p">;</span>
</code></pre></div></div><h3 id="2-automatic-batching">2. Automatic Batching</h3><p>React 18 引入了自動批處理功能，這意味著多個狀態更新將被自動批處理，以減少重新渲染次數，提高性能。<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">useState</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">function</span> <span class="nf">App</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">count</span><span class="p">,</span> <span class="nx">setCount</span><span class="p">]</span> <span class="o">=</span> <span class="nf">useState</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">text</span><span class="p">,</span> <span class="nx">setText</span><span class="p">]</span> <span class="o">=</span> <span class="nf">useState</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span>

  <span class="kd">const</span> <span class="nx">handleClick</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nf">setCount</span><span class="p">(</span><span class="nx">c</span> <span class="o">=&gt;</span> <span class="nx">c</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
    <span class="nf">setText</span><span class="p">(</span><span class="dl">'</span><span class="s1">計數已更新</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="k">return </span><span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">計數</span><span class="p">:</span> <span class="p">{</span><span class="nx">count</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/h1</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">text</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/p</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">handleClick</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">增加</span><span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">App</span><span class="p">;</span>
</code></pre></div></div><h3 id="3-suspense-for-data-fetching">3. Suspense for Data Fetching</h3><p>React 18 擴展了 Suspense 的功能，現在可以用於數據加載，這使得處理異步操作更加簡單和直觀。<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">Suspense</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">DataComponent</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nf">lazy</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="k">import</span><span class="p">(</span><span class="dl">'</span><span class="s1">./DataComponent</span><span class="dl">'</span><span class="p">));</span>

<span class="kd">function</span> <span class="nf">App</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return </span><span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">React</span> <span class="mi">18</span> <span class="nx">的重點特性</span><span class="o">&lt;</span><span class="sr">/h1</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">Suspense</span> <span class="nx">fallback</span><span class="o">=</span><span class="p">{</span><span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nx">加載中</span><span class="p">...</span><span class="o">&lt;</span><span class="sr">/div&gt;}</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">DataComponent</span> <span class="o">/&gt;</span>
      <span class="o">&lt;</span><span class="sr">/Suspense</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">App</span><span class="p">;</span>
</code></pre></div></div><h3 id="4-新的-hooks">4. 新的 Hooks</h3><p>React 18 引入了一些新的 Hooks，如 <code class="language-plaintext highlighter-rouge">useTransition</code> 和 <code class="language-plaintext highlighter-rouge">useDeferredValue</code>，這些 Hooks 提供了更多的功能和靈活性。<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">useState</span><span class="p">,</span> <span class="nx">useDeferredValue</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">function</span> <span class="nf">App</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">value</span><span class="p">,</span> <span class="nx">setValue</span><span class="p">]</span> <span class="o">=</span> <span class="nf">useState</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">deferredValue</span> <span class="o">=</span> <span class="nf">useDeferredValue</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>

  <span class="k">return </span><span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">value</span><span class="p">}</span> <span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="nx">e</span> <span class="o">=&gt;</span> <span class="nf">setValue</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">)}</span> <span class="sr">/</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">延遲值</span><span class="p">:</span> <span class="p">{</span><span class="nx">deferredValue</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/p</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">App</span><span class="p">;</span>
</code></pre></div></div><h3 id="5-改進的-ssr-和-hydration">5. 改進的 SSR 和 Hydration</h3><p>React 18 改進了服務器端渲染（SSR）和水合（Hydration）過程，使得應用加載更快。<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">ReactDOMServer</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-dom/server</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">App</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./App</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">html</span> <span class="o">=</span> <span class="nx">ReactDOMServer</span><span class="p">.</span><span class="nf">renderToString</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">App</span> <span class="o">/&gt;</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">html</span><span class="p">);</span>
</code></pre></div></div><h2 id="總結">總結</h2><p>React 18 帶來了許多強大的新特性和改進：<ol><li>Concurrent Mode 提升了應用的響應速度。<li>Automatic Batching 減少了重新渲染次數。<li>Suspense for Data Fetching 使異步操作更加簡單。<li>新的 Hooks 提供了更多的功能和靈活性。<li>改進的 SSR 和 Hydration 使應用加載更快。</ol><p>通過掌握這些新特性，開發者可以充分利用 React 18 的優勢，構建高效、靈活的應用。<h2 id="參考資料">參考資料</h2><ul><li><a href="https://reactjs.org/">React 官方文檔</a><li><a href="https://reactjs.org/blog/2022/03/29/react-v18.html">React 18 發布公告</a></ul><footer><p class="read-more"> Continue reading <a class="heading flip-title" href="/blog/2023-03-03-blog-react18-1/">React 18 的重點特性與應用</a></footer></article><article id="post-blog-blog-vue3&Quasar-2" class="page post mb6" role="article"><header><h1 class="post-title flip-project-title"> <a href="/blog/2023-02-13-blog-vue3&Quasar-2/" class="flip-title"> Quasar 與 Vue 3 的進階應用技巧 </a></h1><div class="post-date"> <span class="ellipsis mr1"> <time datetime="2023-02-13T00:00:00+08:00">13 Feb 2023</time> in <span>Blog</span> </span> <span class="ellipsis" data-tippy-content="Last modified at: 14 Sep 2024"> <span class="sr-only">Last modified at:</span> <span class="icon-history"></span> <time datetime="2024-09-14T22:31:29+08:00">2024-09-14</time> </span></div><a href="/blog/2023-02-13-blog-vue3&Quasar-2/" class="no-hover no-print-link flip-project" tabindex="-1"><div class="img-wrapper lead aspect-ratio sixteen-nine flip-project-img"> <img src="https://cdn.quasar.dev/logo-v2/svg/logo.svg" alt="Quasar 與 Vue 3 的進階應用技巧" width="864" height="486" loading="lazy" /></div></a></header><ol id="markdown-toc"><li><a href="#前言" id="markdown-toc-前言">前言</a><li><a href="#vue-3-在-quasar-中的基礎應用" id="markdown-toc-vue-3-在-quasar-中的基礎應用">Vue 3 在 Quasar 中的基礎應用</a><li><a href="#vue-3-在-quasar-中的進階應用技巧" id="markdown-toc-vue-3-在-quasar-中的進階應用技巧">Vue 3 在 Quasar 中的進階應用技巧</a><ol><li><a href="#1-使用組合式-api" id="markdown-toc-1-使用組合式-api">1. 使用組合式 API</a><li><a href="#2-使用-teleport-組件" id="markdown-toc-2-使用-teleport-組件">2. 使用 Teleport 組件</a><li><a href="#3-使用-suspense-組件" id="markdown-toc-3-使用-suspense-組件">3. 使用 Suspense 組件</a><li><a href="#4-使用-provideinject" id="markdown-toc-4-使用-provideinject">4. 使用 Provide/Inject</a><li><a href="#5-使用-quasar-的響應式工具與-vue-3-的-reactive" id="markdown-toc-5-使用-quasar-的響應式工具與-vue-3-的-reactive">5. 使用 Quasar 的響應式工具與 Vue 3 的 reactive</a><li><a href="#6-使用-quasar-插件與-vue-3-的生命週期鉤子" id="markdown-toc-6-使用-quasar-插件與-vue-3-的生命週期鉤子">6. 使用 Quasar 插件與 Vue 3 的生命週期鉤子</a></ol><li><a href="#總結" id="markdown-toc-總結">總結</a><li><a href="#參考資料" id="markdown-toc-參考資料">參考資料</a></ol><h2 id="前言">前言</h2><p>Quasar 是一個強大的 UI 框架,完全支持 Vue 3。本文將深入探討在 Quasar 中使用 Vue 3 的進階技巧,幫助開發者更好地利用 Vue 3 的新特性。<h2 id="vue-3-在-quasar-中的基礎應用">Vue 3 在 Quasar 中的基礎應用</h2><p>首先,讓我們回顧一下 Vue 3 在 Quasar 中的基本用法:<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">template</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nx">q</span><span class="o">-</span><span class="nx">page</span> <span class="kd">class</span><span class="o">=</span><span class="dl">"</span><span class="s2">flex flex-center</span><span class="dl">"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">q</span><span class="o">-</span><span class="nx">btn</span> <span class="nx">color</span><span class="o">=</span><span class="dl">"</span><span class="s2">primary</span><span class="dl">"</span> <span class="nx">label</span><span class="o">=</span><span class="dl">"</span><span class="s2">點擊我</span><span class="dl">"</span> <span class="p">@</span><span class="nd">click</span><span class="o">=</span><span class="dl">"</span><span class="s2">increment</span><span class="dl">"</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">你已經點擊了</span> <span class="mi">9</span> <span class="nx">次</span><span class="err">。</span><span class="o">&lt;</span><span class="sr">/p</span><span class="err">&gt;
</span>  <span class="o">&lt;</span><span class="sr">/q-page</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="sr">/template</span><span class="err">&gt;
</span>
<span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ref</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">vue</span><span class="dl">'</span>

<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">count</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="kd">const</span> <span class="nx">increment</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">count</span><span class="p">.</span><span class="nx">value</span><span class="o">++</span>
    <span class="k">return</span> <span class="p">{</span> <span class="nx">count</span><span class="p">,</span> <span class="nx">increment</span> <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="o">&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span></code></pre></div></div><h2 id="vue-3-在-quasar-中的進階應用技巧">Vue 3 在 Quasar 中的進階應用技巧</h2><h3 id="1-使用組合式-api">1. 使用組合式 API</h3><p>Vue 3 的組合式 API 在 Quasar 中可以充分發揮:<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ref</span><span class="p">,</span> <span class="nx">computed</span><span class="p">,</span> <span class="nx">onMounted</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">vue</span><span class="dl">'</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">useQuasar</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">quasar</span><span class="dl">'</span>

<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">$q</span> <span class="o">=</span> <span class="nf">useQuasar</span><span class="p">()</span>
    <span class="kd">const</span> <span class="nx">count</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="kd">const</span> <span class="nx">doubleCount</span> <span class="o">=</span> <span class="nf">computed</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">count</span><span class="p">.</span><span class="nx">value</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>

    <span class="kd">const</span> <span class="nx">increment</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">count</span><span class="p">.</span><span class="nx">value</span><span class="o">++</span>
      <span class="nx">$q</span><span class="p">.</span><span class="nf">notify</span><span class="p">({</span> <span class="na">message</span><span class="p">:</span> <span class="dl">'</span><span class="s1">計數增加了!</span><span class="dl">'</span> <span class="p">})</span>
    <span class="p">}</span>

    <span class="nf">onMounted</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">組件已掛載</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">})</span>

    <span class="k">return</span> <span class="p">{</span> <span class="nx">count</span><span class="p">,</span> <span class="nx">doubleCount</span><span class="p">,</span> <span class="nx">increment</span> <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="o">&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span></code></pre></div></div><h3 id="2-使用-teleport-組件">2. 使用 Teleport 組件</h3><p>Vue 3 的 Teleport 組件在 Quasar 中也能很好地工作:<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;template&gt;</span>
  <span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;teleport</span> <span class="na">to=</span><span class="s">"body"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;q-dialog</span> <span class="na">v-model=</span><span class="s">"showDialog"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;q-card&gt;</span>
          <span class="nt">&lt;q-card-section&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"text-h6"</span><span class="nt">&gt;</span>對話框內容<span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/q-card-section&gt;</span>
        <span class="nt">&lt;/q-card&gt;</span>
      <span class="nt">&lt;/q-dialog&gt;</span>
    <span class="nt">&lt;/teleport&gt;</span>
    <span class="nt">&lt;q-btn</span> <span class="na">label=</span><span class="s">"顯示對話框"</span> <span class="err">@</span><span class="na">click=</span><span class="s">"showDialog = true"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/template&gt;</span>

<span class="nt">&lt;script&gt;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ref</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">vue</span><span class="dl">'</span>

<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">showDialog</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">{</span> <span class="nx">showDialog</span> <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></div></div><h3 id="3-使用-suspense-組件">3. 使用 Suspense 組件</h3><p>Suspense 組件可以優雅地處理異步組件:<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;template&gt;</span>
  <span class="nt">&lt;suspense&gt;</span>
    <span class="nt">&lt;template</span> <span class="na">#default</span><span class="nt">&gt;</span>
      <span class="nt">&lt;async-component</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/template&gt;</span>
    <span class="nt">&lt;template</span> <span class="na">#fallback</span><span class="nt">&gt;</span>
      <span class="nt">&lt;q-spinner-dots</span> <span class="na">color=</span><span class="s">"primary"</span> <span class="na">size=</span><span class="s">"3em"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/template&gt;</span>
  <span class="nt">&lt;/suspense&gt;</span>
<span class="nt">&lt;/template&gt;</span>

<span class="nt">&lt;script&gt;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">defineAsyncComponent</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">vue</span><span class="dl">'</span>

<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="na">components</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">AsyncComponent</span><span class="p">:</span> <span class="nf">defineAsyncComponent</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="k">import</span><span class="p">(</span><span class="dl">'</span><span class="s1">./AsyncComponent.vue</span><span class="dl">'</span><span class="p">))</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></div></div><h3 id="4-使用-provideinject">4. 使用 Provide/Inject</h3><p>Provide 和 Inject 在 Quasar 應用中可以實現跨組件通信:<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 父組件</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">provide</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">vue</span><span class="dl">'</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">useQuasar</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">quasar</span><span class="dl">'</span>

<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">$q</span> <span class="o">=</span> <span class="nf">useQuasar</span><span class="p">()</span>
    <span class="nf">provide</span><span class="p">(</span><span class="dl">'</span><span class="s1">notifyService</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
      <span class="na">success</span><span class="p">:</span> <span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">$q</span><span class="p">.</span><span class="nf">notify</span><span class="p">({</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">positive</span><span class="dl">'</span><span class="p">,</span> <span class="nx">message</span> <span class="p">})</span>
    <span class="p">})</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 子組件</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">inject</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">vue</span><span class="dl">'</span>

<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">notifyService</span> <span class="o">=</span> <span class="nf">inject</span><span class="p">(</span><span class="dl">'</span><span class="s1">notifyService</span><span class="dl">'</span><span class="p">)</span>
    <span class="kd">const</span> <span class="nx">showSuccess</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">notifyService</span><span class="p">.</span><span class="nf">success</span><span class="p">(</span><span class="dl">'</span><span class="s1">操作成功!</span><span class="dl">'</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">{</span> <span class="nx">showSuccess</span> <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div><h3 id="5-使用-quasar-的響應式工具與-vue-3-的-reactive">5. 使用 Quasar 的響應式工具與 Vue 3 的 reactive</h3><p>結合 Quasar 的響應式工具和 Vue 3 的 reactive:<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">reactive</span><span class="p">,</span> <span class="nx">computed</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">vue</span><span class="dl">'</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">useQuasar</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">quasar</span><span class="dl">'</span>

<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">$q</span> <span class="o">=</span> <span class="nf">useQuasar</span><span class="p">()</span>
    <span class="kd">const</span> <span class="nx">state</span> <span class="o">=</span> <span class="nf">reactive</span><span class="p">({</span>
      <span class="na">count</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="na">isLargeScreen</span><span class="p">:</span> <span class="nf">computed</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">$q</span><span class="p">.</span><span class="nx">screen</span><span class="p">.</span><span class="nx">gt</span><span class="p">.</span><span class="nx">sm</span><span class="p">)</span>
    <span class="p">})</span>

    <span class="k">return</span> <span class="p">{</span> <span class="nx">state</span> <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div><h3 id="6-使用-quasar-插件與-vue-3-的生命週期鉤子">6. 使用 Quasar 插件與 Vue 3 的生命週期鉤子</h3><p>結合 Quasar 插件和 Vue 3 的生命週期鉤子:<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">onMounted</span><span class="p">,</span> <span class="nx">onUnmounted</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">vue</span><span class="dl">'</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">useQuasar</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">quasar</span><span class="dl">'</span>

<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">$q</span> <span class="o">=</span> <span class="nf">useQuasar</span><span class="p">()</span>
    <span class="kd">let</span> <span class="nx">notifyInstance</span> <span class="o">=</span> <span class="kc">null</span>

    <span class="nf">onMounted</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">notifyInstance</span> <span class="o">=</span> <span class="nx">$q</span><span class="p">.</span><span class="nf">notify</span><span class="p">({</span>
        <span class="na">message</span><span class="p">:</span> <span class="dl">'</span><span class="s1">歡迎!</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">timeout</span><span class="p">:</span> <span class="mi">0</span>
      <span class="p">})</span>
    <span class="p">})</span>

    <span class="nf">onUnmounted</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if </span><span class="p">(</span><span class="nx">notifyInstance</span><span class="p">)</span> <span class="p">{</span>
        <span class="nf">notifyInstance</span><span class="p">()</span>
      <span class="p">}</span>
    <span class="p">})</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div><h2 id="總結">總結</h2><p>在 Quasar 中使用 Vue 3 的進階技巧可以大大提升開發效率和應用性能:<ol><li>組合式 API 提供了更靈活的代碼組織方式。<li>Teleport 組件可以更好地控制 DOM 結構。<li>Suspense 組件簡化了異步組件的處理。<li>Provide/Inject 實現了更優雅的跨組件通信。<li>結合 Quasar 的響應式工具和 Vue 3 的 reactive 可以創建更強大的響應式系統。<li>Quasar 插件與 Vue 3 的生命週期鉤子結合使用,可以更好地管理資源。</ol><p>通過掌握這些進階技巧,開發者可以充分利用 Vue 3 在 Quasar 中的優勢,構建高效、靈活的應用。<h2 id="參考資料">參考資料</h2><ul><li><a href="https://quasar.dev/">Quasar 官方文檔</a><li><a href="https://v3.vuejs.org/">Vue 3 文檔</a></ul><footer><p class="read-more"> Continue reading <a class="heading flip-title" href="/blog/2023-02-13-blog-vue3&Quasar-2/">Quasar 與 Vue 3 的進階應用技巧</a></footer></article><h2 class="sr-only">Pagination</h2><nav class="pagination heading clearfix" role="navigation"><ul><li class="pagination-item older" > <a class=" " href="/2/" rel="next" >Older</a><li class="pagination-item newer" > <span class=" ">Newer</span></ul></nav><footer class="content" role="contentinfo"><hr/><p><small class="copyright">© 2021. All rights reserved. </small><hr class="sr-only"/></footer></main></hy-push-state> <!--[if gt IE 10]><!----> <script nomodule>(()=>{var t,n=document.createElement("script");!("noModule"in n)&&"onbeforeload"in n&&(t=!1,document.addEventListener("beforeload",function(e){if(e.target===n)t=!0;else if(!e.target.hasAttribute("nomodule")||!t)return;e.preventDefault()},!0),n.type="module",n.src=".",document.head.appendChild(n),n.remove())})(); </script> <script src="/assets/js/hydejack-9.2.1.js" type="module"></script> <script src="/assets/js/LEGACY-hydejack-9.2.1.js" nomodule defer></script> <script type="module"> if ('serviceWorker' in navigator) { /**/ navigator.serviceWorker.getRegistration() .then(r => r.unregister()) .catch(() => {}); /**/ } </script> <!--<![endif]--> <!-- Code for integrating CloudFlare's email protection with Hydejack's single page app loading. --> <script> document.getElementById('_pushState').addEventListener('hy-push-state-after', function (e) { function e(e){ (console.error?console.error:console.log).call(console,e) } function t(e){ return l.innerHTML='<a href="'+e.replace(/"/g,"&quot;")+'"></a>',l.childNodes[0].getAttribute("href") } function r(e,t){ var r=e.substr(t,2);return parseInt(r,16) } function n(e,n){ for(var o="",c=r(e,n),a=n+2;a<e.length;a+=2){ var l=r(e,a)^c; o+=String.fromCharCode(l) } return t(o) } var o="/cdn-cgi/l/email-protection#", c=".__cf_email__", a="data-cfemail", l=document.createElement("div"); !function(){ for(var t=document.getElementsByTagName("a"),r=0;r<t.length;r++) try{ var c=t[r],a=c.href.indexOf(o); a>-1&&(c.href="mailto:"+n(c.href,a+o.length)) }catch(t){ e(t) } }(), function(){ for(var t=document.querySelectorAll(c),r=0;r<t.length;r++) try{ var o=t[r],l=n(o.getAttribute(a),0),i=document.createTextNode(l); o.parentNode.replaceChild(i,o) }catch(t){ e(t) } }() }); </script><div hidden><h2 class="sr-only">Templates (for web app):</h2><template id="_animation-template"><div class="animation-main fixed-top"><nav id="breadcrumbs" class="screen-only"><ul></ul></nav><div class="content"><div class="page"></div></div></div></template> <template id="_loading-template"><div class="loading nav-btn fr"> <span class="sr-only">Loading…</span> <span class="icon-cog"></span></div></template> <template id="_error-template"><div class="page"><h1 class="page-title">Error</h1><p class="lead"> Sorry, an error occurred while loading <a class="this-link" href=""></a>.</div></template> <template id="_permalink-template"> <a href="#" class="permalink"> <span class="sr-only">Permalink</span> <span class="content-hash"></span> </a> </template> <template id="_dark-mode-template"> <button id="_dark-mode" class="nav-btn no-hover" > <span class="sr-only">Dark Mode</span> <span class="icon-brightness-contrast"></span> </button> </template> <template id="_search-template"> <button id="_search" class="nav-btn no-hover"> <label class="sr-only" for="_search-input">Search</label> <span class="icon-search"></span> </button><div id="_search-box"><div class="nav-btn"> <span class="icon-search"></span></div><input id="_search-input" type="search" class="form-control form-control-lg nav-btn" placeholder="Type something…" /> <button type="reset" class="nav-btn no-hover"> <span class="sr-only">Close</span> <span class="icon-cross"></span> </button></div><div id="_hits"></div></template></div></html>
